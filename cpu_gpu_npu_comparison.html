<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU vs GPU vs NPU 核心架构解析</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #151515;
            --panel-bg: #222;
            --text-main: #ffffff;
            --accent-amber: #ffc033;
            --accent-cyan: #33ffff;
            --accent-red: #ff6666;
            --accent-green: #66ff66;
            --grid-line: #333;
            --scanline: rgba(0, 0, 0, 0.2);
        }

        @keyframes scanline {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 0 100%;
            }
        }

        @keyframes flicker {
            0% {
                opacity: 0.97;
            }

            5% {
                opacity: 0.95;
            }

            10% {
                opacity: 0.9;
            }

            15% {
                opacity: 0.95;
            }

            20% {
                opacity: 0.99;
            }

            50% {
                opacity: 0.95;
            }

            55% {
                opacity: 0.9;
            }

            60% {
                opacity: 0.99;
            }

            100% {
                opacity: 0.97;
            }
        }

        @keyframes grid-scroll {
            0% {
                transform: translate3d(0, 0, 0);
            }

            100% {
                transform: translate3d(30px, 30px, 0);
            }
        }

        body {
            font-family: 'VT323', 'Courier New', 'Microsoft YaHei', monospace;
            font-size: 1.2rem;
            line-height: 1.6;
            color: var(--text-main);
            text-shadow: 0 0 6px rgba(0, 255, 255, 0.6);
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            overflow: hidden;
            /* Full screen PPT mode */
            cursor: none;
            height: 100vh;
            width: 100vw;
        }

        /* Music Toggle Button - Cassette Futurism Style */
        .music-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;

            /* Retro Plastic Body */
            background: #1a1a1a;
            border: 1px solid #333;

            /* Bevel & Depth */
            box-shadow:
                inset 1px 1px 0px rgba(255, 255, 255, 0.1),
                inset -1px -1px 0px rgba(0, 0, 0, 0.5),
                4px 4px 0px rgba(0, 0, 0, 0.5);

            color: #555;
            /* Off state text */
            padding: 6px 12px;
            /* Smaller size */

            cursor: pointer;
            font-family: 'VT323', monospace;
            font-size: 1.1rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: bold;

            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);

            /* Decorative angled corners */
            clip-path: polygon(8px 0, 100% 0,
                    100% calc(100% - 8px),
                    calc(100% - 8px) 100%,
                    0 100%, 0 8px);
        }

        /* The "LED" indicator strip */
        .music-toggle::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #330000;
            /* Dark Red */
            border-radius: 50%;
            box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.8);
            transition: all 0.3s;
            border: 1px solid #000;
        }

        .music-toggle:hover {
            background: #222;
            color: #777;
            transform: translate(-1px, -1px);
            box-shadow:
                inset 1px 1px 0px rgba(255, 255, 255, 0.1),
                inset -1px -1px 0px rgba(0, 0, 0, 0.5),
                5px 5px 0px rgba(0, 0, 0, 0.5);
        }

        .music-toggle:active {
            transform: translate(2px, 2px);
            box-shadow:
                inset 2px 2px 5px rgba(0, 0, 0, 0.8),
                0px 0px 0px rgba(0, 0, 0, 0);
        }

        /* Playing State */
        .music-toggle.playing {
            color: #ffaa00;
            /* Retro Amber */
            text-shadow: 0 0 8px rgba(255, 170, 0, 0.6);
            background: #1a1a1a;
            border-color: #553300;
        }

        .music-toggle.playing::before {
            background: #ff3300;
            /* Bright Red LED */
            box-shadow: 0 0 8px #ff3300, inset 1px 1px 2px rgba(255, 255, 255, 0.4);
            border-color: #880000;
        }

        .music-toggle.playing:hover {
            color: #ffcc00;
            text-shadow: 0 0 12px rgba(255, 170, 0, 0.8);
        }

        .universe-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, #2b3745 0%, #15151a 100%);
            z-index: -2;
            overflow: hidden;
        }

        .stars {
            width: 1px;
            height: 1px;
            background: transparent;
            box-shadow: 1744px 122px #FFF, 134px 1321px #FFF, 92px 859px #FFF;
            animation: animStar 50s linear infinite;
        }

        .stars2 {
            width: 2px;
            height: 2px;
            background: transparent;
            box-shadow: 1744px 122px #FFF, 134px 1321px #FFF, 92px 859px #FFF;
            animation: animStar 100s linear infinite;
        }

        .stars3 {
            width: 3px;
            height: 3px;
            background: transparent;
            box-shadow: 1744px 122px #FFF, 134px 1321px #FFF, 92px 859px #FFF;
            animation: animStar 150s linear infinite;
        }

        @keyframes animStar {
            from {
                transform: translateY(0px);
            }

            to {
                transform: translateY(-2000px);
            }
        }

        /* Navigation Menu */
        .nav-menu-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 2000;
            /* Higher than everything */
            font-family: 'Share Tech Mono', monospace;

            /* Hidden state by default */
            opacity: 0;
            pointer-events: none;
            /* 关键：隐藏时不阻挡点击 */
            transform: translate(-30px, -30px) scale(0.9);
            /* 收缩在左上角 */
            transform-origin: top left;

            transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            /* 顺滑的展开动画 */
        }

        /* Invisible hover area to reveal menu */
        .nav-trigger-area {
            position: fixed;
            top: 0;
            left: 0;
            width: 60px;
            /* 缩小触发区域，仅限左上角 */
            height: 60px;
            z-index: 2001;
            cursor: crosshair;
            /* 提示这里有东西 */
        }

        /* Show menu when hovering trigger area OR the menu itself */
        .nav-trigger-area:hover+.nav-menu-container,
        .nav-menu-container:hover {
            opacity: 1;
            pointer-events: auto;
            transform: translate(0, 0) scale(1);
            /* 展开 */
        }

        .nav-toggle {
            background: linear-gradient(180deg, #2a2a2a, #1a1a1a);
            border: 2px solid var(--accent-cyan);
            color: var(--accent-cyan);
            padding: 8px 15px;
            cursor: pointer;
            font-size: 1rem;
            text-transform: uppercase;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 8px;
            border-radius: 4px;
            /* 3D Button Effect with Glow */
            box-shadow:
                0 0 10px rgba(0, 255, 255, 0.2),
                0 4px 0 #005555,
                0 5px 10px rgba(0, 0, 0, 0.5);
            transition: all 0.1s;
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }

        /* 按钮扫光效果 */
        .nav-toggle::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: button-shine 3s infinite;
        }

        @keyframes button-shine {
            0% {
                transform: translateX(-100%) rotate(45deg);
            }

            20% {
                transform: translateX(100%) rotate(45deg);
            }

            100% {
                transform: translateX(100%) rotate(45deg);
            }
        }

        .nav-toggle:active {
            transform: translateY(4px);
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.4);
        }

        @keyframes nav-grid-scroll {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 20px 20px;
            }
        }

        .nav-list {
            background: #181818;
            /* 科技网格背景 */
            background-image:
                linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: nav-grid-scroll 3s linear infinite;

            border: 2px solid #333;
            border-top: 2px solid var(--accent-cyan);
            /* 顶部科技蓝条 */
            border-bottom: 4px solid #111;
            border-radius: 8px;

            list-style: none;
            padding: 15px;
            margin: 0;
            width: 280px;
            max-height: 80vh;
            overflow-y: auto;

            /* 3D 塑料质感阴影 + 科技微光 */
            box-shadow:
                inset 0 0 30px rgba(0, 0, 0, 0.9),
                0 0 15px rgba(0, 255, 255, 0.1),
                0 10px 30px rgba(0, 0, 0, 0.5);

            position: relative;
        }

        /* 导航栏内部装饰条 */
        .nav-list::before {
            content: "";
            display: block;
            width: 100%;
            height: 4px;
            background: repeating-linear-gradient(90deg,
                    var(--accent-cyan),
                    var(--accent-cyan) 10px,
                    transparent 10px,
                    transparent 20px);
            margin-bottom: 15px;
            opacity: 0.6;
            border-radius: 2px;
        }

        .nav-item {
            margin-bottom: 8px;
            border-bottom: 1px dashed #333;
            padding-bottom: 5px;
        }

        .nav-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .nav-link {
            color: #aaa;
            text-decoration: none;
            font-size: 0.9rem;
            display: block;
            transition: all 0.2s;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 4px 8px;
            border-radius: 2px;
        }

        .nav-link:hover {
            color: #fff;
            background: rgba(0, 255, 255, 0.15);
            text-shadow: 0 0 8px var(--accent-cyan);
            padding-left: 12px;
            border-left: 3px solid var(--accent-cyan);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.1);
        }

        .nav-link::before {
            content: "> ";
            color: var(--accent-cyan);
            opacity: 0.5;
            margin-right: 5px;
            transition: opacity 0.2s;
        }

        .nav-link:hover::before {
            opacity: 1;
            text-shadow: 0 0 5px var(--accent-cyan);
        }

        /* Custom Cursor Container - Handles Position Only */
        .custom-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            /* Start hidden */
            transition: opacity 0.5s ease;
        }

        /* Custom Cursor Visuals - Handles Shape & Animation */
        .cursor-inner {
            position: absolute;
            top: 0;
            left: 0;
            width: 40px;
            height: 40px;
            border: 1px solid var(--accent-green);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s, background-color 0.2s, border-color 0.2s;
            mix-blend-mode: difference;
            box-shadow: 0 0 8px var(--accent-green), inset 0 0 5px rgba(51, 255, 51, 0.2);
            z-index: 2;
        }

        /* CRT Scan Effect Layer */
        .cursor-scan {
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            background: repeating-linear-gradient(to bottom,
                    transparent 0px,
                    transparent 2px,
                    rgba(51, 255, 51, 0.2) 2px,
                    rgba(51, 255, 51, 0.2) 4px);
            background-size: 100% 8px;
            animation: scan-scroll 0.5s linear infinite;
            pointer-events: none;
            z-index: 1;
            backdrop-filter: contrast(1.2) brightness(1.1) blur(0.5px);
            mix-blend-mode: hard-light;
            opacity: 0.6;
            transition: opacity 0.2s, width 0.2s, height 0.2s;
        }

        .custom-cursor.hovered .cursor-scan {
            width: 100px;
            height: 100px;
            opacity: 0.8;
            background: repeating-linear-gradient(to bottom,
                    transparent 0px,
                    transparent 2px,
                    rgba(51, 255, 255, 0.3) 2px,
                    rgba(51, 255, 255, 0.3) 4px);
        }

        @keyframes scan-scroll {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 0 8px;
            }
        }

        /* Center Dot */
        .cursor-inner::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 4px;
            background: var(--accent-green);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 4px #fff;
        }

        /* Crosshair Lines */
        .cursor-inner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                linear-gradient(to bottom, transparent 48%, var(--accent-green) 48%, var(--accent-green) 52%, transparent 52%),
                linear-gradient(to right, transparent 48%, var(--accent-green) 48%, var(--accent-green) 52%, transparent 52%);
            opacity: 0.3;
            border-radius: 50%;
        }

        .custom-cursor.hovered .cursor-inner {
            width: 60px;
            height: 60px;
            background-color: rgba(51, 255, 51, 0.05);
            border-color: var(--accent-cyan);
            border-style: dashed;
            animation: spin 4s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            100% {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        /* Flat Chip Layout */
        .chip-stack {
            position: relative;
            width: 300px;
            height: 300px;
            margin-top: 2rem;
            /* Removed 3D transforms */
        }

        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Layer 1: Substrate (PCB) */
        .layer.substrate {
            background: #0a2a0a;
            border: 1px solid #0f300f;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
        }

        /* Pins pattern */
        .layer.substrate::after {
            content: '';
            position: absolute;
            inset: 5px;
            background-image: radial-gradient(#c5a005 15%, transparent 16%);
            background-size: 10px 10px;
            opacity: 0.3;
        }

        /* Layer 2: Silicon Die (Logic) */
        .layer.die {
            background: rgba(20, 20, 25, 0.95);
            border: 1px solid #555;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 12px;
            padding: 12px;
            box-sizing: border-box;
            /* Deep inset for the "socket" look */
            box-shadow:
                inset 0 0 30px rgba(0, 0, 0, 0.8),
                0 0 0 1px #333,
                0 0 20px rgba(0, 0, 0, 0.5);
            /* Tech corners */
            clip-path: polygon(0 0,
                    100% 0,
                    100% calc(100% - 15px),
                    calc(100% - 15px) 100%,
                    0 100%);
        }

        /* Dynamic Retro Grid Animation */
        @keyframes retro-grid-scroll {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 20px 20px;
            }
        }

        .arch-block {
            border: 1px solid rgba(255, 255, 255, 0.1);
            background:
                linear-gradient(135deg, rgba(30, 30, 35, 0.95), rgba(20, 20, 25, 0.98));
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 10px;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;

            /* Enhanced 3D Effect */
            box-shadow:
                inset 1px 1px 0px rgba(255, 255, 255, 0.15),
                inset -1px -1px 0px rgba(0, 0, 0, 0.6),
                0 5px 15px rgba(0, 0, 0, 0.5),
                0 0 0 1px #222;

            transform: perspective(500px) translateZ(0);
        }

        /* Shine effect */
        .arch-block::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to bottom right,
                    rgba(255, 255, 255, 0) 0%,
                    rgba(255, 255, 255, 0) 40%,
                    rgba(255, 255, 255, 0.1) 50%,
                    rgba(255, 255, 255, 0) 60%,
                    rgba(255, 255, 255, 0) 100%);
            transform: rotate(45deg) translateY(-100%);
            transition: transform 0.5s;
            pointer-events: none;
        }

        @keyframes grid-pulse {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 0.7;
            }
        }

        /* Add animated grid on hover or always? Let's do always for that "alive" feel */
        .arch-block::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: retro-grid-scroll 3s linear infinite, grid-pulse 4s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
            opacity: 0.5;
            mix-blend-mode: overlay;
        }

        .arch-block:hover {
            transform: perspective(500px) translateZ(10px) translateY(-5px);
            z-index: 10;
        }

        .arch-block:hover::after {
            transform: rotate(45deg) translateY(100%);
            transition: transform 0.8s;
        }

        .cpu-area:hover {
            box-shadow:
                inset 0 0 30px rgba(51, 255, 255, 0.3),
                0 0 25px rgba(51, 255, 255, 0.6),
                0 10px 30px rgba(0, 0, 0, 0.8);
            border-color: var(--accent-cyan);
            background-color: rgba(51, 255, 255, 0.1);
            z-index: 100;
        }

        .gpu-area:hover {
            box-shadow:
                inset 0 0 30px rgba(255, 102, 102, 0.3),
                0 0 25px rgba(255, 102, 102, 0.6),
                0 10px 30px rgba(0, 0, 0, 0.8);
            border-color: var(--accent-red);
            background-color: rgba(255, 102, 102, 0.1);
            z-index: 100;
        }

        .npu-area:hover {
            box-shadow:
                inset 0 0 30px rgba(102, 255, 102, 0.3),
                0 0 25px rgba(102, 255, 102, 0.6),
                0 10px 30px rgba(0, 0, 0, 0.8);
            border-color: var(--accent-green);
            background-color: rgba(102, 255, 102, 0.1);
            z-index: 100;
        }

        .arch-label {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 8px;
            z-index: 2;
            text-shadow: 0 0 5px currentColor;
            background: rgba(0, 0, 0, 0.5);
            /* Legibility */
            padding: 2px 5px;
            border: 1px solid currentColor;
            width: 80%;
            transition: all 0.3s;
        }

        .arch-block:hover .arch-label {
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
            transform: scale(1.1);
            background: rgba(0, 0, 0, 0.8);
            box-shadow: 0 0 10px currentColor;
        }

        text-align: center;
        }

        /* CPU Area: Top Left */
        .cpu-area {
            grid-column: 1 / 2;
            grid-row: 1 / 2;
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
            /* Removed flex-direction: row to align with others */
            gap: 6px;
        }

        .mini-core {
            width: 30%;
            height: 60%;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--accent-cyan);
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.2);
        }

        /* GPU Area: Top Right */
        .gpu-area {
            grid-column: 2 / 3;
            grid-row: 1 / 2;
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .gpu-grid-mini {
            width: 80%;
            height: 60%;
            background-image: radial-gradient(var(--accent-red) 20%, transparent 20%);
            background-size: 4px 4px;
            opacity: 0.6;
        }

        /* NPU Area: Bottom (Full Width) */
        .npu-area {
            grid-column: 1 / -1;
            grid-row: 2 / 3;
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .npu-array-mini {
            width: 90%;
            height: 60%;
            background: repeating-linear-gradient(45deg,
                    rgba(102, 255, 102, 0.1),
                    rgba(102, 255, 102, 0.1) 5px,
                    transparent 5px,
                    transparent 10px);
            border: 1px dashed var(--accent-green);
        }

        /* Layer 3: Interconnects */
        .layer.interconnect {
            pointer-events: none;
            opacity: 0.5;
        }

        .layer.interconnect::before {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(90deg, transparent 95%, rgba(51, 255, 255, 0.2) 95%),
                linear-gradient(0deg, transparent 95%, rgba(51, 255, 255, 0.2) 95%);
            background-size: 20px 20px;
        }

        /* Layer 4: IHS (Heat Spreader) - Hidden for flat view */
        .layer.ihs {
            display: none;
        }

        /* Core Details */
        .core-detail {
            position: absolute;
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid var(--accent-cyan);
            color: #fff;
            font-size: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .core-detail.alu {
            top: 10%;
            left: 10%;
            width: 40%;
            height: 40%;
            background: rgba(255, 100, 100, 0.3);
            border-color: var(--accent-red);
        }

        .core-detail.reg {
            top: 10%;
            right: 10%;
            width: 30%;
            height: 80%;
            background: rgba(100, 255, 100, 0.3);
            border-color: var(--accent-green);
        }

        .core-detail.cache {
            bottom: 10%;
            left: 10%;
            width: 40%;
            height: 30%;
            background: rgba(255, 200, 50, 0.3);
            border-color: var(--accent-amber);
        }

        /* @keyframes float-rotate { ... } Removed to allow manual control */

        .dud {
            color: var(--accent-red);
        }

        /* Advanced CRT Scanline Effect */
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom,
                    rgba(255, 255, 255, 0),
                    rgba(255, 255, 255, 0) 50%,
                    rgba(0, 0, 0, 0.1) 50%,
                    rgba(0, 0, 0, 0.1));
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 999;
            animation: scanline 0.2s linear infinite;
            opacity: 0.15;
        }

        /* Vignette & Flicker */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, rgba(0, 0, 0, 0) 60%, rgba(0, 0, 0, 0.2) 100%);
            pointer-events: none;
            z-index: 998;
            animation: flicker 4s infinite;
        }

        header {
            background-color: rgba(10, 10, 10, 0.9);
            border-bottom: 2px solid var(--accent-green);
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 4px;
            box-shadow: 0 0 20px rgba(51, 255, 51, 0.1);
        }

        header::before {
            content: "/// SYSTEM_BOOT_SEQUENCE_INIT ///";
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 0.7rem;
            color: var(--accent-green);
            opacity: 0.8;
            font-family: monospace;
        }

        header h1 {
            margin: 0;
            font-size: 3.5rem;
            color: #0f0;
            text-shadow:
                0 0 5px #0f0,
                0 0 10px #0f0,
                0 0 20px #0f0;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.1em;
            position: relative;
            display: inline-block;
            animation: matrix-pulse 2s infinite alternate;
            z-index: 2;
        }

        @keyframes matrix-pulse {
            0% {
                opacity: 0.9;
                text-shadow: 0 0 5px #0f0;
            }

            100% {
                opacity: 1;
                text-shadow: 0 0 20px #0f0, 0 0 10px #fff;
            }
        }

        /* Matrix Rain Effect Overlay for Header */
        header::after {
            content: "1010101010101010101010101010101010101010101010101010101010101010";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            color: #0f0;
            opacity: 0.1;
            font-size: 10px;
            word-break: break-all;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        header p {
            font-size: 1rem;
            color: var(--accent-cyan);
            margin-top: 1rem;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
            position: relative;
            z-index: 2;
        }

        .container {
            width: 100vw;
            height: 100vh;
            max-width: none;
            margin: 0;
            padding: 0;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        section {
            /* Slide Styles */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(30, 30, 35, 0.95);
            border: none;
            /* Remove default border for full screen */
            border-radius: 0;
            padding: 4rem;
            box-sizing: border-box;
            /* Ensure padding doesn't cause overflow */
            /* More padding for full screen */
            margin: 0;

            /* Flex center content */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            /* Changed to flex-start to allow scrolling */
            align-items: center;

            /* Transitions */
            opacity: 0;
            pointer-events: none;
            transform: scale(1.1);
            transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: none;
            will-change: opacity, transform;
            overflow-y: auto;
            /* Allow scrolling if content overflows */
            overflow-x: hidden;
        }

        /* Custom Scrollbar for Sections */
        section::-webkit-scrollbar {
            width: 8px;
        }

        section::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        section::-webkit-scrollbar-thumb {
            background: var(--accent-cyan);
            border-radius: 4px;
        }

        section::-webkit-scrollbar-thumb:hover {
            background: #fff;
        }

        section.active {
            opacity: 1;
            pointer-events: auto;
            transform: scale(1);
            z-index: 10;
        }

        /* Adjust content grid for full screen */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
            /* Center vertically */
            width: 100%;
            max-width: 1400px;
        }

        section:hover {
            transform: scale(1);
            /* Disable hover move effect in slide mode */
            box-shadow: none;
            border-color: #444;
        }

        /* Cassette Futurism Color Schemes */
        /* 1. Overview - Retro Amber/Brown */
        section:nth-of-type(1) {
            border-top: 6px solid var(--accent-amber);
            background: linear-gradient(160deg, #2a2520 0%, #1a1a1a 100%);
        }

        /* 2. 3D Intro - Retro Orange */
        section:nth-of-type(2) {
            border-top: 6px solid #ffb000;
            background: linear-gradient(160deg, #2a2010 0%, #1a1a1a 100%);
        }

        /* 3. CPU - Retro Cyan/Slate */
        section:nth-of-type(3) {
            border-top: 6px solid var(--accent-cyan);
            background: linear-gradient(160deg, #1a2a2a 0%, #1a1a1a 100%);
        }

        /* 4. GPU - Retro Red/Maroon */
        section:nth-of-type(4) {
            border-top: 6px solid var(--accent-red);
            background: linear-gradient(160deg, #2a1a1a 0%, #1a1a1a 100%);
        }

        /* 5. NPU - Retro Green/Olive */
        section:nth-of-type(5) {
            border-top: 6px solid var(--accent-green);
            background: linear-gradient(160deg, #1a2a1a 0%, #1a1a1a 100%);
        }

        /* 6. Comparison - Retro Grey/Purple */
        section:nth-of-type(6) {
            border-top: 6px solid #a0a0a0;
            background: linear-gradient(160deg, #252525 0%, #151515 100%);
        }

        /* HUD Corners */
        section::after {
            content: "";
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            background:
                linear-gradient(to right, var(--accent-cyan) 2px, transparent 2px) 0 0,
                linear-gradient(to bottom, var(--accent-cyan) 2px, transparent 2px) 0 0,
                linear-gradient(to left, var(--accent-cyan) 2px, transparent 2px) 100% 0,
                linear-gradient(to bottom, var(--accent-cyan) 2px, transparent 2px) 100% 0,
                linear-gradient(to left, var(--accent-cyan) 2px, transparent 2px) 100% 100%,
                linear-gradient(to top, var(--accent-cyan) 2px, transparent 2px) 100% 100%,
                linear-gradient(to right, var(--accent-cyan) 2px, transparent 2px) 0 100%,
                linear-gradient(to top, var(--accent-cyan) 2px, transparent 2px) 0 100%;
            background-size: 15px 15px;
            background-repeat: no-repeat;
            pointer-events: none;
            opacity: 0.7;
        }

        section::before {
            content: "MODULE_0" counter(section-counter);
            position: absolute;
            top: -10px;
            left: 20px;
            background: var(--bg-color);
            padding: 0 10px;
            color: var(--accent-cyan);
            font-size: 0.7rem;
            border: 1px solid var(--accent-cyan);
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
            z-index: 2;
        }

        body {
            counter-reset: section-counter;
        }

        section {
            counter-increment: section-counter;
        }

        h2 {
            color: var(--accent-amber);
            border-bottom: 1px dashed var(--text-main);
            padding-bottom: 0.5rem;
            margin-top: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(255, 176, 0, 0.3);
            transition: text-shadow 0.2s;
        }

        h2:hover {
            text-shadow: 2px 0 var(--accent-red), -2px 0 var(--accent-cyan);
        }

        h3 {
            color: var(--accent-cyan);
            margin-top: 1.5rem;
            text-transform: uppercase;
            font-size: 1rem;
            letter-spacing: 1px;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: start;
        }

        @media (max-width: 900px) {
            .content-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .image-container {
                margin-top: 1rem;
            }
        }

        .image-container {
            text-align: center;
            background: #181818;
            /* 模拟塑料外壳 */
            border: 4px solid #2a2a2a;
            border-radius: 15px;
            padding: 1.5rem;
            position: relative;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            overflow: hidden;

            /* 3D 塑料质感阴影 */
            box-shadow:
                /* 顶部高光 */
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                /* 内部深邃感 */
                inset 0 0 40px rgba(0, 0, 0, 0.8),
                /* 外部投影 */
                0 10px 30px rgba(0, 0, 0, 0.5),
                /* 底部厚度 */
                0 6px 0 #111;
        }

        /* 装饰性条纹 - 磁带风格 */
        .image-container::before {
            content: "";
            position: absolute;
            bottom: 12px;
            right: 15px;
            width: 80px;
            height: 6px;
            background: repeating-linear-gradient(-45deg,
                    var(--accent-red),
                    var(--accent-red) 5px,
                    transparent 5px,
                    transparent 10px,
                    var(--accent-amber) 10px,
                    var(--accent-amber) 15px,
                    transparent 15px,
                    transparent 20px);
            z-index: 2;
            opacity: 0.8;
            border-radius: 2px;
            box-shadow: 0 0 5px rgba(255, 100, 100, 0.3);
        }

        /* 扫描线纹理 + 顶部装饰点 */
        .image-container::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                /* 顶部装饰点 */
                radial-gradient(circle at 15px 15px, var(--accent-cyan) 2px, transparent 3px),
                radial-gradient(circle at 25px 15px, #333 2px, transparent 3px),
                radial-gradient(circle at 35px 15px, #333 2px, transparent 3px),
                /* 扫描线 */
                linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 100%, 100% 100%, 100% 100%, 100% 4px;
            pointer-events: none;
            z-index: 1;
        }

        .image-container svg {
            cursor: pointer;
            position: relative;
            z-index: 0;
            /* 稍微增加一点对比度 */
            filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
        }

        .image-container:hover {
            border-color: #444;
            transform: translateY(-4px);
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                inset 0 0 20px rgba(0, 0, 0, 0.5),
                0 20px 40px rgba(0, 255, 255, 0.1),
                0 10px 0 var(--accent-cyan);
            /* 底部厚度变色，产生发光感 */
        }

        .image-caption {
            font-size: 0.7rem;
            color: var(--accent-cyan);
            margin-top: 0.5rem;
            font-family: monospace;
            border-top: 1px solid #222;
            padding-top: 5px;
            display: block;
            text-align: left;
            opacity: 0.8;
        }

        .image-caption::before {
            content: "> ";
            animation: blink 1s infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* Comparison Table */
        .tech-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .tech-table th,
        .tech-table td {
            border: 1px solid #333;
            padding: 10px;
            text-align: left;
        }

        .tech-table th {
            background-color: rgba(0, 255, 255, 0.1);
            color: var(--accent-cyan);
            text-transform: uppercase;
        }

        .tech-table tr:hover td {
            background-color: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        /* --- Chip Internal Details CSS --- */
        .mini-core-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 4px;
            height: 60%;
            margin-bottom: 4px;
            width: 80%;
            /* Align width with GPU/NPU internal containers */
        }

        .mini-core {
            border: 1px solid var(--accent-cyan);
            background: rgba(0, 243, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
            color: var(--accent-cyan);
            box-shadow: 0 0 5px rgba(0, 243, 255, 0.2);
            transition: all 0.3s;
        }

        .mini-cache {
            width: 80%;
            height: 25%;
            border: 1px solid var(--accent-amber);
            background: rgba(255, 176, 0, 0.15);
            color: var(--accent-amber);
            font-size: 9px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: auto;
            box-shadow: 0 0 5px rgba(255, 176, 0, 0.2);
        }

        .gpu-grid-mini {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 2px;
            height: 80%;
            width: 80%;
        }

        .mini-sm {
            background: var(--accent-red);
            opacity: 0.4;
            border: 1px solid rgba(255, 50, 50, 0.3);
        }

        .mini-sm:nth-child(odd) {
            opacity: 0.7;
            background: rgba(255, 50, 50, 0.6);
            box-shadow: 0 0 3px var(--accent-red);
        }

        .npu-layout-mini {
            display: flex;
            flex-direction: row;
            height: 80%;
            width: 90%;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }

        .npu-layout-mini .npu-buffer {
            width: 15%;
            height: 100%;
            border: 1px solid var(--accent-green);
            font-size: 10px;
            font-weight: bold;
            writing-mode: vertical-rl;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-green);
            background: rgba(50, 255, 50, 0.1);
            letter-spacing: 1px;
            text-shadow: 0 0 2px var(--accent-green);
        }

        .npu-array-mini {
            flex: 1;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2px;
            border: 1px dashed var(--accent-green);
            padding: 2px;
            background: rgba(0, 20, 0, 0.3);
        }

        .systolic-cell {
            background: var(--accent-green);
            opacity: 0.4;
            border-radius: 50%;
            box-shadow: 0 0 2px var(--accent-green);
            animation: pulse-cell 1s infinite alternate;
        }

        @keyframes pulse-cell {
            from {
                opacity: 0.3;
                transform: scale(0.8);
            }

            to {
                opacity: 0.8;
                transform: scale(1.1);
            }
        }

        .npu-activation {
            width: 15%;
            height: 100%;
            background: rgba(51, 255, 0, 0.1);
            border: 1px solid var(--accent-green);
            font-size: 8px;
            writing-mode: vertical-rl;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-green);
            letter-spacing: 1px;
            text-shadow: 0 0 2px var(--accent-green);
        }

        .click-hint {
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 8px;
            color: #fff;
            background: #000;
            padding: 1px 3px;
            border: 1px solid #fff;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .arch-block:hover .click-hint {
            opacity: 1;
            animation: blink 1s infinite;
        }

        .arch-block {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .arch-block:hover {
            transform: translateZ(5px);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            z-index: 10;
        }

        /* --- Detail Overlay --- */
        #detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: none;
            /* Hidden by default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        #detail-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .detail-content {
            width: 80%;
            height: 80%;
            position: relative;
            perspective: 1000px;
            border: 2px solid var(--text-main);
            background: #111;
            overflow: hidden;
            /* Clip content */
            display: flex;
            flex-direction: column;
        }

        .detail-header {
            padding: 1rem;
            border-bottom: 2px solid var(--text-main);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #222;
            z-index: 10;
        }

        .detail-title {
            font-size: 2rem;
            color: var(--accent-amber);
            text-transform: uppercase;
        }

        .detail-close-btn {
            background: transparent;
            border: 1px solid var(--accent-red);
            color: var(--accent-red);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .detail-close-btn:hover {
            background: var(--accent-red);
            color: #000;
            box-shadow: 0 0 15px var(--accent-red);
            transform: rotate(90deg);
        }

        .detail-viewport {
            flex: 1;
            position: relative;
            overflow: hidden;
            /* Hide scrollbars, we use wheel */
            background:
                linear-gradient(rgba(18, 16, 16, 0.9), rgba(18, 16, 16, 0.9)),
                linear-gradient(0deg, transparent 24%, rgba(0, 255, 255, .05) 25%, rgba(0, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, .05) 75%, rgba(0, 255, 255, .05) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(0, 255, 255, .05) 25%, rgba(0, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, .05) 75%, rgba(0, 255, 255, .05) 76%, transparent 77%, transparent);
            background-size: 100% 100%, 40px 40px, 40px 40px;
            cursor: grab;
        }

        .detail-viewport::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background-image:
                linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: retro-grid-scroll 10s linear infinite;
            pointer-events: none;
            z-index: 0;
        }
        }

        .detail-viewport:active {
            cursor: grabbing;
        }

        .detail-scene {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-style: preserve-3d;
            /* Initial transform set by JS */
        }

        /* Specific Detail Views */
        .detail-view-cpu,
        .detail-view-gpu,
        .detail-view-npu {
            width: 560px;
            height: 380px;
            position: absolute;
            top: -190px;
            /* Center it (half of height) */
            left: -280px;
            /* Center it (half of width) */
            /* Dynamic Grid Background */
            background:
                linear-gradient(rgba(20, 20, 20, 0.95), rgba(20, 20, 20, 0.95)),
                linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, .05) 25%, rgba(255, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .05) 75%, rgba(255, 255, 255, .05) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, .05) 25%, rgba(255, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .05) 75%, rgba(255, 255, 255, .05) 76%, transparent 77%, transparent);
            background-size: 100% 100%, 20px 20px, 20px 20px;
            border: 2px solid;
            display: none;
            /* Show specific one via JS */
            padding: 20px;
            box-sizing: border-box;
            /* 3D Effect */
            box-shadow:
                inset 1px 1px 0px rgba(255, 255, 255, 0.1),
                inset -1px -1px 0px rgba(0, 0, 0, 0.5),
                0 0 0 2px #000,
                10px 10px 0px rgba(0, 0, 0, 0.8);
            transform-style: preserve-3d;
        }

        /* Add animation to detail view background */
        .detail-view-cpu::before,
        .detail-view-gpu::before,
        .detail-view-npu::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: retro-grid-scroll 4s linear infinite;
            pointer-events: none;
            z-index: -1;
        }

        .detail-view-cpu {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2);
        }

        .detail-view-gpu {
            border-color: var(--accent-red);
            box-shadow: 0 0 30px rgba(255, 51, 51, 0.2);
        }

        .detail-view-npu {
            border-color: var(--accent-green);
            box-shadow: 0 0 30px rgba(51, 255, 0, 0.2);
        }

        /* --- Detail View Internal Animations & 3D Styles --- */

        /* CPU Styles */
        .cpu-core-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 85%;
            padding: 20px;
        }

        .cpu-core {
            position: relative;
            border: 1px solid var(--accent-cyan);
            padding: 15px;
            background: rgba(0, 20, 20, 0.85);
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 0 20px rgba(0, 255, 255, 0.1), 0 0 0 1px rgba(0, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cpu-core:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
        }

        .core-title {
            text-align: center;
            color: var(--accent-cyan);
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 5px;
            text-shadow: 0 0 5px var(--accent-cyan);
        }

        .cpu-control {
            background: rgba(255, 255, 0, 0.1);
            border: 1px solid var(--accent-amber);
            color: var(--accent-amber);
            padding: 8px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: inset 0 0 5px rgba(255, 255, 0, 0.2);
        }

        .cpu-exec-group {
            display: flex;
            gap: 10px;
            flex: 1;
        }

        .cpu-unit {
            flex: 1;
            background: rgba(0, 243, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(0, 243, 255, 0.3);
            box-shadow: inset 0 0 5px rgba(0, 243, 255, 0.2);
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, background 0.2s;
            font-size: 0.8rem;
            text-align: center;
        }

        .cpu-unit:hover {
            transform: scale(1.05);
            background: rgba(0, 243, 255, 0.25);
            box-shadow: 0 0 15px var(--accent-cyan);
            z-index: 2;
        }

        .cpu-cache-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .cpu-cache {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
            padding: 5px;
            text-align: center;
            font-size: 0.8rem;
        }

        .cpu-cache.l1 {
            opacity: 0.8;
        }

        .cpu-cache.l2 {
            opacity: 0.6;
            font-size: 0.7rem;
        }

        /* Bus & L3 Styles */
        .cpu-bus-container {
            height: 30px;
            display: flex;
            justify-content: space-around;
            padding: 0 20px;
            position: relative;
        }

        .bus-line-group {
            width: 4px;
            height: 100%;
            position: relative;
        }

        .bus-line {
            width: 100%;
            height: 100%;
            background: rgba(255, 191, 0, 0.3);
            box-shadow: 0 0 5px rgba(255, 191, 0, 0.1);
            transition: all 0.3s;
        }

        .bus-packet-down,
        .bus-packet-up {
            position: absolute;
            left: 0;
            width: 100%;
            height: 6px;
            background: #fff;
            opacity: 0;
            box-shadow: 0 0 5px #fff;
        }

        .cpu-l3-cache {
            margin-top: 0;
            border: 1px solid var(--accent-amber);
            color: var(--accent-amber);
            padding: 10px;
            background: rgba(255, 191, 0, 0.1);
            box-shadow: inset 0 0 10px rgba(255, 191, 0, 0.2);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cpu-l3-cache:hover {
            background: rgba(255, 191, 0, 0.2);
            box-shadow: inset 0 0 20px rgba(255, 191, 0, 0.4), 0 0 15px rgba(255, 191, 0, 0.3);
        }

        .l3-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(90deg, rgba(255, 191, 0, 0.1) 1px, transparent 1px);
            background-size: 20px 100%;
            opacity: 0.3;
            pointer-events: none;
        }

        /* Interaction States */
        .cpu-core.active {
            border-color: var(--accent-amber);
            box-shadow: 0 0 20px rgba(255, 191, 0, 0.3);
        }

        .bus-line-group.active .bus-line {
            background: var(--accent-amber);
            box-shadow: 0 0 10px var(--accent-amber);
        }

        .bus-line-group.flow-down .bus-packet-down {
            animation: bus-flow-down 0.5s linear infinite;
        }

        .bus-line-group.flow-up .bus-packet-up {
            animation: bus-flow-up 0.5s linear infinite;
        }

        @keyframes bus-flow-down {
            0% {
                top: 0;
                opacity: 1;
            }

            100% {
                top: 100%;
                opacity: 0;
            }
        }

        @keyframes bus-flow-up {
            0% {
                top: 100%;
                opacity: 1;
            }

            100% {
                top: 0;
                opacity: 0;
            }
        }

        .cpu-unit::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.6), transparent);
            animation: cpu-process 2s infinite;
        }

        @keyframes cpu-process {
            0% {
                left: -100%;
            }

            50% {
                left: 200%;
            }

            100% {
                left: 200%;
            }
        }

        /* GPU Styles */
        .gpu-grid-container {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 8px;
            height: 80%;
            padding: 20px;
        }

        .gpu-core-unit {
            position: relative;
            background: rgba(60, 10, 10, 0.6);
            border: 1px solid rgba(255, 51, 51, 0.3);
            transition: all 0.2s;
        }

        /* Removed 3D Faces */

        @keyframes gpu-flicker {

            0%,
            100% {
                opacity: 0.4;
                transform: scale(1);
                background: rgba(60, 10, 10, 0.6);
                box-shadow: none;
            }

            50% {
                opacity: 1;
                transform: scale(1.1);
                /* Pop out effect */
                background: rgba(255, 51, 51, 0.8);
                box-shadow:
                    0 0 20px var(--accent-red),
                    inset 0 0 10px rgba(255, 255, 255, 0.4);
                border-color: #fff;
                z-index: 10;
            }
        }

        /* NPU Styles */
        .npu-container {
            display: flex;
            height: 80%;
            gap: 30px;
            perspective: 1000px;
            overflow: visible;
            padding: 20px;
            align-items: center;
        }

        .npu-buffer {
            width: 10%;
            height: 80%;
            border: 1px solid var(--accent-green);
            display: flex;
            align-items: center;
            justify-content: center;
            writing-mode: vertical-rl;
            background: rgba(0, 20, 0, 0.5);
            box-shadow: inset 0 0 10px rgba(51, 255, 0, 0.1);
            text-shadow: 0 0 5px var(--accent-green);
            transform: rotateY(10deg);
            /* Slight 3D angle */
            font-size: 1.5rem;
            font-weight: bold;
            letter-spacing: 5px;
        }

        .npu-array {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 8px;
            padding: 10px;
            background: rgba(0, 20, 0, 0.4);

            /* Isometric 3D View for Systolic Array */
            transform: rotateX(60deg) rotateZ(-45deg);
            transform-style: preserve-3d;
            box-shadow: 20px 20px 60px rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(102, 255, 102, 0.2);
            margin: 0 20px;
        }

        .npu-node {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            background: rgba(0, 40, 0, 0.6);
            border: 1px solid rgba(102, 255, 102, 0.1);
        }

        /* Top Face (The active part) */
        .npu-node::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(102, 255, 102, 0.8);
            transform: translateZ(1px);
            box-shadow: 0 0 5px var(--accent-green);
            opacity: 0.8;
        }

        /* Side/Body (Visualized by the gap and movement) */

        @keyframes npu-pulse {

            0%,
            100% {
                transform: translateZ(0px);
                filter: brightness(0.5);
            }

            50% {
                transform: translateZ(50px);
                /* High 3D pop */
                filter: brightness(1.5);
                box-shadow: 0 0 20px var(--accent-green);
            }
        }

        .detail-info-panel {
            position: relative;
            width: 100%;
            background: #111;
            border-top: 1px solid #555;
            padding: 10px 20px;
            color: #ccc;
            font-size: 0.9rem;
            z-index: 20;
            flex-shrink: 0;
            box-sizing: border-box;
        }

        .zoom-controls {
            display: flex;
            gap: 10px;
            margin-right: 20px;
        }

        .zoom-btn {
            width: 40px;
            height: 40px;
            background: #222;
            border: 1px solid var(--text-main);
            color: var(--text-main);
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .zoom-btn:hover {
            background: #333;
        }

        /* SVG Styles */
        svg text {
            font-family: 'Share Tech Mono', monospace;
            fill: var(--text-main);
        }

        svg rect,
        svg path,
        svg line,
        svg circle {
            stroke-width: 1.5;
            vector-effect: non-scaling-stroke;
            transition: all 0.3s ease;
        }

        /* Scroll Reveal */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .chip-icon {
            display: inline-block;
            width: 12px;
            height: 12px;
            margin-right: 8px;
        }

        .cpu-color {
            background-color: var(--accent-cyan);
        }

        .gpu-color {
            background-color: var(--accent-red);
        }

        .npu-color {
            background-color: var(--accent-green);
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: #aaa;
            font-size: 0.7rem;
            border-top: 1px solid #222;
            margin-top: 2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Modal Styles */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-backdrop.active {
            display: flex;
            opacity: 1;
        }

        .modal-card {
            background: #222;
            border: 4px solid #333;
            /* Retro thick border */
            border-radius: 10px;
            /* Rounded corners like old monitors */
            padding: 25px;
            width: 90%;
            max-width: 450px;
            position: relative;
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow:
                0 0 0 4px #000,
                /* Inner black outline */
                0 0 20px rgba(0, 0, 0, 0.8),
                inset 0 0 30px rgba(0, 0, 0, 0.8);
            /* Inner shadow */
            background-image:
                linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            /* CRT Scanlines */
        }

        .modal-card::before {
            content: "SYSTEM_DIAGNOSTIC_TOOL_V1.0";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #222;
            padding: 0 10px;
            font-size: 0.7rem;
            color: #aaa;
            letter-spacing: 2px;
            border: 1px solid #333;
        }

        .modal-backdrop.active .modal-card {
            transform: scale(1) translateY(0);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.2rem;
            cursor: pointer;
            color: #444;
            background: #111;
            border: 1px solid #444;
            width: 24px;
            height: 24px;
            line-height: 22px;
            text-align: center;
            z-index: 10;
            transition: all 0.2s;
        }

        .close-btn:hover {
            color: var(--accent-red);
            border-color: var(--accent-red);
            box-shadow: 0 0 8px var(--accent-red);
        }

        .arch-trigger {
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            border: 1px solid transparent;
            padding: 5px 10px;
            /* Button-like padding */
            background: rgba(0, 0, 0, 0.3);
            /* Subtle background */
            border-radius: 4px;
        }

        .arch-trigger:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: currentColor;
            box-shadow: 0 0 10px currentColor;
            text-shadow: 0 0 8px currentColor;
            transform: translateY(-2px);
        }

        .arch-trigger::after {
            content: " [VIEW]";
            font-size: 0.7em;
            opacity: 0;
            margin-left: 5px;
            transition: opacity 0.2s;
        }

        .arch-trigger:hover::after {
            opacity: 1;
        }

        @keyframes text-flicker {

            0%,
            100% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            3% {
                opacity: 0.8;
                text-shadow: 0 0 10px var(--accent-cyan);
            }

            6% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            7% {
                opacity: 0.9;
                text-shadow: 0 0 15px var(--accent-cyan);
            }

            8% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            9% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            10% {
                opacity: 0.95;
                text-shadow: 0 0 18px var(--accent-cyan);
            }

            11% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            23% {
                opacity: 0.9;
                text-shadow: 0 0 15px var(--accent-cyan);
            }

            24% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            35% {
                opacity: 0.85;
                text-shadow: 0 0 12px var(--accent-cyan);
            }

            36% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            42% {
                opacity: 0.8;
                text-shadow: 0 0 10px var(--accent-cyan);
            }

            43% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            50% {
                opacity: 0.95;
                text-shadow: 0 0 18px var(--accent-cyan);
            }

            55% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            62% {
                opacity: 0.9;
                text-shadow: 0 0 15px var(--accent-cyan);
            }

            63% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            70% {
                opacity: 0.9;
                text-shadow: 0 0 15px var(--accent-cyan);
            }

            71% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            80% {
                opacity: 0.8;
                text-shadow: 0 0 10px var(--accent-cyan);
            }

            81% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }

            85% {
                opacity: 0.95;
                text-shadow: 0 0 18px var(--accent-cyan);
            }

            92% {
                opacity: 0.9;
                text-shadow: 0 0 15px var(--accent-cyan);
            }

            93% {
                opacity: 1;
                text-shadow: 0 0 20px var(--accent-cyan);
            }
        }

        .title-flicker {
            animation: text-flicker 3s infinite;
        }

        @keyframes author-pulse {

            0%,
            100% {
                opacity: 0.7;
                text-shadow: 0 0 5px var(--accent-amber);
                transform: scale(1);
            }

            50% {
                opacity: 1;
                text-shadow: 0 0 15px var(--accent-amber);
                transform: scale(1.05);
            }
        }

        @keyframes protocol-blink {

            0%,
            50% {
                opacity: 1;
                text-shadow: 0 0 10px var(--accent-cyan);
            }

            51%,
            100% {
                opacity: 0;
                text-shadow: none;
            }
        }

        .protocol-text {
            /* Animation handled by JS */
        }

        .author-glow {
            animation: author-pulse 3s infinite ease-in-out;
            display: inline-block;
        }

        /* Retro Grid Background Animation */
        .retro-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
            perspective: 300px;
            /* Add perspective for 3D effect */
        }

        .retro-grid::before {
            content: "";
            position: absolute;
            top: -100%;
            left: -100%;
            width: 300%;
            height: 300%;
            background-image:
                linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 60px 60px;
            transform-origin: center;
            animation: grid-pan 10s linear infinite;
        }

        @keyframes grid-pan {
            0% {
                transform: rotateX(45deg) translateY(0);
            }

            100% {
                transform: rotateX(45deg) translateY(60px);
            }
        }

        /* Ensure content sits above the grid */
        section>*:not(.retro-grid) {
            position: relative;
            z-index: 2;
        }

        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 20;
            pointer-events: none;
            opacity: 0.6;
        }
    </style>
</head>

<body>
    <!-- Background Music -->
    <audio id="bgm-audio" loop autoplay>
        <source src="music/Hans Zimmer - Risen from Darkness_L.ogg" type="audio/ogg">
    </audio>

    <!-- Music Controls Container -->
    <div class="music-controls-container"
        style="position: fixed; top: 20px; right: 20px; z-index: 10000; display: flex; gap: 10px;">
        <!-- Music Toggle Switch -->
        <div class="music-toggle" id="music-toggle" style="position: relative; top: auto; right: auto; margin: 0;">
            <span id="music-icon">🔇</span> <span id="music-text">BGM: OFF</span>
        </div>
        <!-- Next Song Button -->
        <div class="music-toggle" id="music-next"
            style="position: relative; top: auto; right: auto; margin: 0; padding: 6px 10px;" title="下一首">
            <span>⏭</span>
        </div>
    </div>

    <!-- Navigation Menu -->
    <div class="nav-trigger-area"></div>
    <div class="nav-menu-container">
        <div class="nav-toggle">/// 系统导航目录 ///</div>
        <ul class="nav-list" id="nav-list">
            <!-- Items injected by JS -->
        </ul>
    </div>

    <div class="universe-bg">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>

    <div class="container">
        <!-- Title Slide -->
        <section class="reveal active"
            style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
            <h1 class="title-flicker"
                style="font-size: 5rem; margin-bottom: 3rem; text-shadow: 0 0 20px var(--accent-cyan);">芯力量 智万物</h1>
            <p class="protocol-text" style="font-size: 1.5rem; letter-spacing: 5px; color: var(--accent-cyan);">
                CORE_POWER_INTELLIGENT_UNIVERSE_INIT</p>
            <p style="margin-top: 3rem; font-size: 1.2rem; letter-spacing: 2px; color: var(--text-main);">
                分享人 : <span class="author-glow" style="color: var(--accent-amber); font-weight: bold;">史蒂芬猴</span>
            </p>
        </section>

        <!-- PART I Cover -->
        <section class="reveal"
            style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
            <h2 style="font-size: 3rem; border: none; text-shadow: 0 0 15px var(--accent-cyan);">PART I: 芯片架构浅析</h2>
            <p style="font-size: 1.5rem; color: #eee; margin-top: 1rem;">Deep Dive into CPU, GPU, and NPU Architectures
            </p>
            <div class="chip-stack" id="interactive-chip">
                <!-- Layer 1: Substrate -->
                <div class="layer substrate"></div>

                <!-- Layer 2: Architecture (Cores + Cache) -->
                <div class="layer die">
                    <!-- CPU Section -->
                    <div class="arch-block cpu-area" onclick="openDetail('cpu')">
                        <div class="arch-label" style="color: var(--accent-cyan);">CPU</div>
                        <div class="mini-core-container">
                            <div class="mini-core"><span>ALU</span></div>
                            <div class="mini-core"><span>ALU</span></div>
                            <div class="mini-core"><span>ALU</span></div>
                            <div class="mini-core"><span>ALU</span></div>
                        </div>
                        <div class="mini-cache">L3 CACHE</div>
                        <div class="click-hint">CLICK TO ZOOM</div>
                    </div>

                    <!-- GPU Section -->
                    <div class="arch-block gpu-area" onclick="openDetail('gpu')">
                        <div class="arch-label" style="color: var(--accent-red);">GPU</div>
                        <div class="gpu-grid-mini">
                            <!-- Generated by CSS pattern, but let's add some 'cores' -->
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                            <div class="mini-sm"></div>
                        </div>
                        <div class="click-hint">CLICK TO ZOOM</div>
                    </div>

                    <!-- NPU Section -->
                    <div class="arch-block npu-area" onclick="openDetail('npu')">
                        <div class="arch-label" style="color: var(--accent-green);">NPU</div>
                        <div class="npu-layout-mini">
                            <div class="npu-buffer">UNIFIED BUFFER</div>
                            <div class="npu-array-mini">
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                                <div class="systolic-cell"></div>
                            </div>
                            <div class="npu-activation">ACTIVATION</div>
                        </div>
                        <div class="click-hint">CLICK TO ZOOM</div>
                    </div>
                </div>

                <!-- Layer 3: Interconnects -->
                <div class="layer interconnect"></div>

                <!-- Layer 4: IHS -->
                <div class="layer ihs"></div>
            </div>
        </section>

        <!-- Overview Section -->
        <section class="reveal">
            <h2>01_架构概览 (Architecture Overview)</h2>
            <div class="content-grid"
                style="display: flex; flex-direction: column; gap: 20px; max-width: 1000px; margin: 0 auto;">

                <!-- CPU Row -->
                <div
                    style="display: flex; align-items: center; width: 100%; background: rgba(0, 255, 255, 0.05); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 10px; padding: 15px;">
                    <div style="flex: 1; text-align: left; padding-right: 20px;">
                        <h3 style="color: #00ffff; font-size: 1.5rem; margin-bottom: 0.5rem;">CPU: 通用型指挥官</h3>
                        <p style="font-size: 1rem; color: #ddd;">Central Processing Unit</p>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 5px;">擅长复杂逻辑与串行任务<br>比喻：博学多才的教授
                            (Professor)</p>
                    </div>
                    <div style="flex: 0 0 200px; display: flex; justify-content: center;">
                        <!-- CPU Reference Image Recreation -->
                        <svg viewBox="0 0 200 150" width="200" height="150"
                            style="background: #001100; border: 1px solid #004400;">
                            <defs>
                                <pattern id="grid-cpu" width="20" height="20" patternUnits="userSpaceOnUse">
                                    <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(50, 205, 50, 0.3)"
                                        stroke-width="1" />
                                </pattern>
                            </defs>
                            <rect width="100%" height="100%" fill="url(#grid-cpu)" />

                            <!-- Title -->
                            <text x="100" y="25" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold"
                                font-family="sans-serif">单个复杂任务</text>

                            <!-- CPU Chip Icon -->
                            <g transform="translate(10, 60)">
                                <rect width="50" height="50" rx="5" fill="#e0e0e0" stroke="#666" stroke-width="2" />
                                <rect x="5" y="15" width="5" height="20" fill="#999" />
                                <rect x="40" y="15" width="5" height="20" fill="#999" />
                                <text x="25" y="32" text-anchor="middle" fill="#000" font-weight="bold" font-size="14"
                                    font-family="sans-serif">CPU</text>
                            </g>

                            <!-- Professor Figure -->
                            <g transform="translate(80, 40)">
                                <!-- Cap -->
                                <path d="M20,20 L60,5 L100,20 L60,35 Z" fill="#000" stroke="#fff" stroke-width="2" />
                                <path d="M60,35 L60,55" stroke="#fff" stroke-width="2" /> <!-- Cap bottom -->
                                <!-- Head -->
                                <circle cx="60" cy="65" r="20" fill="#000" stroke="#fff" stroke-width="2" />
                                <!-- Glasses -->
                                <g stroke="#fff" stroke-width="2" fill="none">
                                    <rect x="48" y="60" width="10" height="6" rx="2" />
                                    <rect x="62" y="60" width="10" height="6" rx="2" />
                                    <line x1="58" y1="63" x2="62" y2="63" />
                                </g>
                                <!-- Body -->
                                <path d="M30,110 L60,90 L90,110" fill="none" stroke="#fff" stroke-width="2" />
                                <!-- Arms -->
                                <path d="M30,110 L50,100 L70,100 L90,110" fill="none" stroke="#fff" stroke-width="2" />
                                <!-- Desk -->
                                <line x1="20" y1="115" x2="100" y2="115" stroke="#fff" stroke-width="3" />
                            </g>
                        </svg>
                    </div>
                </div>

                <!-- GPU Row -->
                <div
                    style="display: flex; align-items: center; width: 100%; background: rgba(255, 51, 51, 0.05); border: 1px solid rgba(255, 51, 51, 0.3); border-radius: 10px; padding: 15px;">
                    <div style="flex: 1; text-align: left; padding-right: 20px;">
                        <h3 style="color: #ff3333; font-size: 1.5rem; margin-bottom: 0.5rem;">GPU: 并行计算大军</h3>
                        <p style="font-size: 1rem; color: #ddd;">Graphics Processing Unit</p>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 5px;">擅长图形渲染与大规模并行计算<br>比喻：人多力量大的学生
                            (Students)</p>
                    </div>
                    <div style="flex: 0 0 200px; display: flex; justify-content: center;">
                        <!-- GPU Reference Image Recreation -->
                        <svg viewBox="0 0 200 150" width="200" height="150"
                            style="background: #001100; border: 1px solid #004400;">
                            <rect width="100%" height="100%" fill="url(#grid-cpu)" /> <!-- Reuse grid -->

                            <!-- Title -->
                            <text x="100" y="25" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold"
                                font-family="sans-serif">同时处理多个简单任务</text>

                            <!-- GPU Chip Icon -->
                            <g transform="translate(10, 60)">
                                <rect width="50" height="50" rx="5" fill="#666" stroke="#999" stroke-width="2" />
                                <rect x="10" y="10" width="30" height="30" fill="#333" />
                                <text x="25" y="32" text-anchor="middle" fill="#fff" font-weight="bold" font-size="14"
                                    font-family="sans-serif">GPU</text>
                            </g>

                            <!-- Students Grid -->
                            <g transform="translate(70, 40)">
                                <defs>
                                    <g id="student-fig">
                                        <circle cx="10" cy="10" r="6" fill="#000" stroke="#fff" stroke-width="1.5" />
                                        <path d="M2,25 L10,18 L18,25" fill="none" stroke="#fff" stroke-width="1.5" />
                                        <line x1="0" y1="28" x2="20" y2="28" stroke="#fff" stroke-width="1.5" />
                                    </g>
                                </defs>
                                <!-- 3x4 Grid -->
                                <use href="#student-fig" x="0" y="0" />
                                <use href="#student-fig" x="30" y="0" />
                                <use href="#student-fig" x="60" y="0" />
                                <use href="#student-fig" x="90" y="0" />

                                <use href="#student-fig" x="0" y="35" />
                                <use href="#student-fig" x="30" y="35" />
                                <use href="#student-fig" x="60" y="35" />
                                <use href="#student-fig" x="90" y="35" />

                                <use href="#student-fig" x="0" y="70" />
                                <use href="#student-fig" x="30" y="70" />
                                <use href="#student-fig" x="60" y="70" />
                                <use href="#student-fig" x="90" y="70" />
                            </g>
                        </svg>
                    </div>
                </div>

                <!-- NPU Row -->
                <div
                    style="display: flex; align-items: center; width: 100%; background: rgba(51, 255, 51, 0.05); border: 1px solid rgba(51, 255, 51, 0.3); border-radius: 10px; padding: 15px;">
                    <div style="flex: 1; text-align: left; padding-right: 20px;">
                        <h3 style="color: #33ff33; font-size: 1.5rem; margin-bottom: 0.5rem;">NPU: AI 专用特种兵</h3>
                        <p style="font-size: 1rem; color: #ddd;">Neural Processing Unit</p>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 5px;">专为神经网络矩阵运算设计<br>比喻：整齐划一的方阵 (Array)
                        </p>
                    </div>
                    <!-- No Image for NPU as requested -->
                    <div style="flex: 0 0 200px; display: flex; justify-content: center;">
                        <!-- Placeholder or empty -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 3D Model Intro Section -->
        <section class="reveal">
            <h2>01.5_3D模型简介 (3D Models)</h2>
            <div class="content-grid">
                <div style="text-align: left;">
                    <h3 style="color: #fff; margin-bottom: 20px;">3D世界的基石：多边形网格</h3>
                    <p style="color: #aaa; font-size: 1rem; margin-bottom: 20px;">
                        我们在屏幕上看到的精美3D角色，本质上是由成千上万个微小的<span style="color: var(--accent-cyan); font-weight: bold;">三角形
                            (Triangles)</span> 拼接而成的。
                    </p>
                    <ul style="list-style: none; padding: 0; font-size: 0.9rem; color: #ddd;">
                        <li style="margin-bottom: 15px; display: flex; align-items: center;">
                            <span
                                style="display: inline-block; width: 8px; height: 8px; background: var(--accent-cyan); margin-right: 10px; transform: rotate(45deg);"></span>
                            <strong>顶点 (Vertex):</strong> 空间中的一个点 (X, Y, Z)。
                        </li>
                        <li style="margin-bottom: 15px; display: flex; align-items: center;">
                            <span
                                style="display: inline-block; width: 8px; height: 8px; background: var(--accent-cyan); margin-right: 10px; transform: rotate(45deg);"></span>
                            <strong>边 (Edge):</strong> 连接两个顶点的线段。
                        </li>
                        <li style="margin-bottom: 15px; display: flex; align-items: center;">
                            <span
                                style="display: inline-block; width: 8px; height: 8px; background: var(--accent-cyan); margin-right: 10px; transform: rotate(45deg);"></span>
                            <strong>面 (Face):</strong> 由三条边围成的三角形，是渲染的基本单位。
                        </li>
                    </ul>
                    <div
                        style="margin-top: 30px; padding: 10px; background: rgba(255,255,255,0.1); border-left: 3px solid var(--accent-cyan); font-size: 0.8rem;">
                        <span style="color: var(--accent-cyan);">交互提示:</span> 点击右侧图像查看微观细节。
                    </div>
                </div>

                <div class="image-container" id="model-3d-container"
                    style="cursor: zoom-in; position: relative; overflow: hidden; border: 1px solid #333; background: #050505; height: 350px; border-radius: 10px; perspective: 1000px;">
                    <!-- True 3D JS Rendered View -->
                    <svg id="wireframe-view" width="100%" height="100%" viewBox="0 0 400 300"
                        style="transition: all 0.5s ease; overflow: visible;">
                        <defs>
                            <filter id="glow-wire">
                                <feGaussianBlur stdDeviation="1.5" result="coloredBlur" />
                                <feMerge>
                                    <feMergeNode in="coloredBlur" />
                                    <feMergeNode in="SourceGraphic" />
                                </feMerge>
                            </filter>
                        </defs>

                        <!-- Background Grid -->
                        <pattern id="grid-3d" width="40" height="40" patternUnits="userSpaceOnUse">
                            <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#1a1a1a" stroke-width="1" />
                        </pattern>
                        <rect width="100%" height="100%" fill="url(#grid-3d)" />

                        <!-- Dynamic Wireframe Group -->
                        <g id="cat-wireframe-group" filter="url(#glow-wire)"></g>

                        <text x="200" y="280" text-anchor="middle" fill="#666" font-size="10"
                            letter-spacing="2">REAL-TIME 3D RENDER</text>
                    </svg>

                    <!-- Detail View (Overlay) -->
                    <div id="triangle-detail"
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.3s;">
                        <svg width="300" height="250" viewBox="0 0 200 150" style="overflow: visible;">
                            <defs>
                                <marker id="dot" markerWidth="8" markerHeight="8" refX="4" refY="4">
                                    <circle cx="4" cy="4" r="3" fill="#fff" />
                                </marker>
                            </defs>
                            <polygon points="100,20 160,120 40,120" fill="rgba(0, 255, 255, 0.1)" stroke="#fff"
                                stroke-width="2" marker-mid="url(#dot)" marker-start="url(#dot)"
                                marker-end="url(#dot)" />

                            <!-- Dynamic Vertex Labels -->
                            <text id="v1-label" x="100" y="10" fill="#fff" font-size="8" text-anchor="middle">Vertex
                                1</text>
                            <text id="v2-label" x="170" y="125" fill="#fff" font-size="8">Vertex 2</text>
                            <text id="v3-label" x="30" y="125" fill="#fff" font-size="8" text-anchor="end">Vertex
                                3</text>

                            <text x="140" y="70" fill="#aaa" font-size="8">Edge</text>
                            <text x="100" y="90" fill="var(--accent-cyan)" font-size="10" font-weight="bold"
                                text-anchor="middle">Face</text>
                        </svg>
                        <p style="color: #aaa; font-size: 0.8rem; margin-top: 10px;">点击任意处返回 (Click to Return)</p>
                    </div>

                    <script>
                        (function () {
                            const groupEl = document.getElementById('cat-wireframe-group');
                            const container = document.getElementById('model-3d-container');
                            const detailOverlay = document.getElementById('triangle-detail');

                            // 3D Vertices (x, y, z)
                            const v = [
                                { x: 0, y: 10, z: 50 },    // 0: Nose Tip
                                { x: 0, y: -20, z: 30 },   // 1: Forehead Center
                                { x: -25, y: -60, z: 10 }, // 2: L Ear Tip
                                { x: 25, y: -60, z: 10 },  // 3: R Ear Tip
                                { x: -20, y: -10, z: 30 }, // 4: L Eye/Temple
                                { x: 20, y: -10, z: 30 },  // 5: R Eye/Temple
                                { x: -40, y: 20, z: 10 },  // 6: L Cheek
                                { x: 40, y: 20, z: 10 },   // 7: R Cheek
                                { x: 0, y: 60, z: 30 },    // 8: Chin
                                { x: 0, y: 0, z: -30 },    // 9: Back of Head
                                { x: -20, y: -30, z: 10 }, // 10: L Ear Base
                                { x: 20, y: -30, z: 10 }   // 11: R Ear Base
                            ];

                            // Faces (Triplets of vertex indices)
                            const faces = [
                                [0, 1, 4], [0, 1, 5], // Nose Bridge
                                [0, 4, 6], [0, 5, 7], // Upper Cheeks
                                [0, 6, 8], [0, 7, 8], // Lower Cheeks
                                [1, 4, 10], [1, 5, 11], // Forehead Sides
                                [1, 10, 2], [1, 11, 3], // Ear Fronts (Upper)
                                [2, 10, 6], [3, 11, 7], // Ear Sides/Cheek connection
                                [6, 8, 9], [7, 8, 9], // Jaw Back
                                [2, 10, 9], [3, 11, 9], // Ear Backs
                                [1, 10, 9], [1, 11, 9], // Top Head Back
                                [4, 6, 9], [5, 7, 9] // Side Head Back
                            ];

                            let angleY = 0;
                            let isPaused = false;
                            let selectedFace = null;

                            // Create SVG elements for faces
                            const faceElements = faces.map((face, i) => {
                                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                                path.setAttribute("stroke", "var(--accent-cyan)");
                                path.setAttribute("stroke-width", "1.5");
                                path.setAttribute("fill", "rgba(0,0,0,0)");
                                path.setAttribute("stroke-linejoin", "round");
                                path.setAttribute("stroke-linecap", "round");
                                path.style.cursor = "pointer";
                                path.style.pointerEvents = "all"; // Ensure entire face is clickable
                                path.style.transition = "fill 0.2s, stroke 0.2s";

                                // Hover Effect
                                path.addEventListener('mouseenter', () => {
                                    if (!isPaused) {
                                        path.setAttribute("fill", "rgba(51, 255, 255, 0.3)");
                                        path.setAttribute("stroke", "#fff");
                                    }
                                });
                                path.addEventListener('mouseleave', () => {
                                    if (!isPaused) {
                                        path.setAttribute("fill", "rgba(0,0,0,0)");
                                        path.setAttribute("stroke", "var(--accent-cyan)");
                                    }
                                });

                                // Click to Zoom
                                path.addEventListener('click', (e) => {
                                    e.stopPropagation(); // Prevent container click
                                    showDetail(face);
                                });

                                groupEl.appendChild(path);
                                return path;
                            });

                            function showDetail(faceIndices) {
                                isPaused = true;
                                container.classList.add('zoomed');
                                detailOverlay.style.opacity = '1';
                                detailOverlay.style.pointerEvents = 'auto';

                                // Update Labels with Coordinates
                                const p1 = v[faceIndices[0]];
                                const p2 = v[faceIndices[1]];
                                const p3 = v[faceIndices[2]];

                                document.getElementById('v1-label').textContent = `V1: (${p1.x}, ${p1.y}, ${p1.z})`;
                                document.getElementById('v2-label').textContent = `V2: (${p2.x}, ${p2.y}, ${p2.z})`;
                                document.getElementById('v3-label').textContent = `V3: (${p3.x}, ${p3.y}, ${p3.z})`;
                            }

                            // Global Click to Reset
                            container.addEventListener('click', () => {
                                if (isPaused) {
                                    isPaused = false;
                                    container.classList.remove('zoomed');
                                    detailOverlay.style.opacity = '0';
                                    detailOverlay.style.pointerEvents = 'none';

                                    // Reset styles
                                    faceElements.forEach(el => {
                                        el.setAttribute("fill", "rgba(0,0,0,0)");
                                        el.setAttribute("stroke", "var(--accent-cyan)");
                                    });
                                }
                            });

                            function render() {
                                if (!isPaused) {
                                    angleY += 0.015;
                                }

                                const cos = Math.cos(angleY);
                                const sin = Math.sin(angleY);
                                const center = { x: 200, y: 150 };
                                const scale = 1.2;

                                // Project Vertices
                                const projected = v.map(p => {
                                    const rx = p.x * cos - p.z * sin;
                                    const rz = p.x * sin + p.z * cos;
                                    const fov = 300;
                                    const dist = 400 + rz;
                                    const factor = fov / dist;
                                    return {
                                        x: rx * factor * scale + center.x,
                                        y: p.y * factor * scale + center.y,
                                        z: rz // Keep Z for sorting if needed
                                    };
                                });

                                // Update Face Paths
                                faces.forEach((face, i) => {
                                    const p1 = projected[face[0]];
                                    const p2 = projected[face[1]];
                                    const p3 = projected[face[2]];

                                    // Backface Culling (Optional, but good for clarity)
                                    // Calculate normal Z component
                                    const ax = p2.x - p1.x; const ay = p2.y - p1.y;
                                    const bx = p3.x - p1.x; const by = p3.y - p1.y;
                                    const normalZ = ax * by - ay * bx;

                                    if (normalZ < 0) {
                                        // Facing away
                                        faceElements[i].style.opacity = "0.1"; // Dim backfaces
                                    } else {
                                        faceElements[i].style.opacity = "1";
                                    }

                                    const d = `M${p1.x.toFixed(1)},${p1.y.toFixed(1)} L${p2.x.toFixed(1)},${p2.y.toFixed(1)} L${p3.x.toFixed(1)},${p3.y.toFixed(1)} Z`;
                                    faceElements[i].setAttribute('d', d);
                                });

                                requestAnimationFrame(render);
                            }

                            render();
                        })();
                    </script>
                </div>
            </div>

            <!-- New Content: Line Calculation -->
            <div
                style="margin-top: 30px; padding-top: 20px; border-top: 1px dashed #444; display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <!-- Left: Explanation -->
                <div>
                    <h3>> 线条是如何计算的? (Line Rasterization)</h3>
                    <div class="highlight-box"
                        style="border-left: 3px solid #ffb000; background: rgba(255, 176, 0, 0.05); padding: 10px; font-size: 0.9rem; margin-bottom: 20px;">
                        <p style="margin:0;"><strong>计算机存储的秘密：</strong></p>
                        <p style="margin-top:5px; color: #eee;">
                            你看到的连贯线条，在计算机硬盘里其实<strong>只存储了两个端点的坐标</strong>。
                            <br>中间连线的每一个像素点，都是在显示时<strong>实时计算</strong>出来的。
                        </p>
                    </div>
                    <div
                        style="font-size: 0.8rem; color: #bbb; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px;">
                        <div style="margin-bottom: 8px; font-weight: bold; color: #fff;">CPU 的困境：简单但繁重</div>
                        <p style="margin: 0; line-height: 1.5;">
                            虽然计算公式 $y = ax + b$ 很简单，但 CPU 只能<strong>串行</strong>地一个点一个点计算。
                            <br>想象一下，一个 3D 游戏画面有几百万条线，每条线有几百个点。让 CPU 逐个计算这些点，就像让一个数学教授去数一袋米有多少粒一样，大材小用且效率极低。
                        </p>
                    </div>
                </div>

                <!-- Right: SVG Animation -->
                <div class="image-container">
                    <!-- The SVG Animation for Line Calculation -->
                    <svg width="100%" height="260" viewBox="0 0 400 260" style="background: #151515;">
                        <defs>
                            <pattern id="gridPattern" width="10" height="10" patternUnits="userSpaceOnUse">
                                <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#333" stroke-width="0.5" />
                            </pattern>
                        </defs>
                        <g transform="translate(10, 30)">
                            <rect x="0" y="0" width="200" height="200" fill="url(#gridPattern)" stroke="#555"
                                stroke-width="1" />
                            <text x="-5" y="205" fill="#888" font-size="10">0</text>
                            <text x="205" y="205" fill="#888" font-size="10">X</text>
                            <text x="-5" y="-5" fill="#888" font-size="10">Y</text>
                            <rect x="40" y="170" width="10" height="10" fill="#fff" />
                            <text x="40" y="195" fill="#ffb000" font-size="10" font-weight="bold">(x1,y1)</text>
                            <rect x="160" y="110" width="10" height="10" fill="#fff" />
                            <text x="160" y="105" fill="#ffb000" font-size="10" font-weight="bold">(x2,y2)</text>
                            <rect x="50" y="170" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="0.5s" fill="freeze" />
                            </rect>
                            <rect x="60" y="160" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="1.0s" fill="freeze" />
                            </rect>
                            <rect x="70" y="160" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="1.5s" fill="freeze" />
                            </rect>
                            <rect x="80" y="150" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="2.0s" fill="freeze" />
                            </rect>
                            <rect x="90" y="150" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="2.5s" fill="freeze" />
                            </rect>
                            <rect x="100" y="140" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="3.0s" fill="freeze" />
                            </rect>
                            <rect x="110" y="140" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="3.5s" fill="freeze" />
                            </rect>
                            <rect x="120" y="130" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="4.0s" fill="freeze" />
                            </rect>
                            <rect x="130" y="130" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="4.5s" fill="freeze" />
                            </rect>
                            <rect x="140" y="120" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="5.0s" fill="freeze" />
                            </rect>
                            <rect x="150" y="120" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="5.5s" fill="freeze" />
                            </rect>
                            <rect x="0" y="0" width="200" height="200" fill="#151515" opacity="0" pointer-events="none">
                                <animate attributeName="opacity" values="0;0;1;0" keyTimes="0;0.9;0.95;1" dur="8s"
                                    repeatCount="indefinite" />
                            </rect>
                        </g>
                        <g transform="translate(220, 30)">
                            <rect width="170" height="200" rx="5" fill="#111" stroke="#00ffff" stroke-width="1" />
                            <text x="10" y="20" fill="#fff" font-size="12" font-weight="bold">CPU 线性插值计算</text>
                            <line x1="10" y1="25" x2="160" y2="25" stroke="#444" stroke-width="1" />
                            <g font-size="10" fill="#aaa">
                                <text x="10" y="40">已知: P1(4,3), P2(16,9)</text>
                                <text x="10" y="55">斜率 a = (9-3)/(16-4) = 0.5</text>
                                <text x="10" y="70">截距 b = 3 - 0.5*4 = 1</text>
                                <text x="10" y="85" fill="#00ffff">方程: y = 0.5x + 1</text>
                            </g>
                            <line x1="10" y1="95" x2="160" y2="95" stroke="#444" stroke-width="1"
                                stroke-dasharray="2,2" />
                            <g transform="translate(10, 110)" font-family="monospace" font-size="10" fill="#ffb000">
                                <text y="0" opacity="0">x=5: y=0.5*5+1=3.5≈3
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="0.5s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="15" opacity="0">x=6: y=0.5*6+1=4
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="1.0s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="30" opacity="0">x=7: y=0.5*7+1=4.5≈4
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="1.5s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="45" opacity="0">x=8: y=0.5*8+1=5
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="2.0s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="60" opacity="0">x=9: y=0.5*9+1=5.5≈5
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="2.5s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="75" opacity="0">...</text>
                            </g>
                            <g transform="translate(120, 170)">
                                <rect width="40" height="20" fill="#333" stroke="#fff" rx="2" />
                                <text x="20" y="14" text-anchor="middle" fill="#fff" font-size="10"
                                    font-weight="bold">CPU</text>
                                <circle cx="35" cy="5" r="2" fill="#ff0000">
                                    <animate attributeName="opacity" values="1;0;1" dur="0.5s"
                                        repeatCount="indefinite" />
                                </circle>
                            </g>
                        </g>
                    </svg>
                    <div class="image-caption">FIG_01.6: CPU 串行计算线条 (Serial Processing)</div>
                </div>
            </div>
    </div>

    </section>




    </div>

    <div class="image-container">
        <!-- The SVG Animation for Line Calculation -->
        <svg width="100%" height="260" viewBox="0 0 400 260" style="background: #151515;">
            <!-- Definitions -->
            <defs>
                <pattern id="gridPattern" width="10" height="10" patternUnits="userSpaceOnUse">
                    <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#333" stroke-width="0.5" />
                </pattern>
            </defs>

            <!-- Left: Coordinate System (200x200) -->
            <g transform="translate(10, 30)">
                <!-- Grid -->
                <rect x="0" y="0" width="200" height="200" fill="url(#gridPattern)" stroke="#555" stroke-width="1" />

                <!-- Axis Labels -->
                <text x="-5" y="205" fill="#888" font-size="10">0</text>
                <text x="205" y="205" fill="#888" font-size="10">X</text>
                <text x="-5" y="-5" fill="#888" font-size="10">Y</text>

                <!-- Endpoints (Static) -->
                <!-- P1(4, 3) -> x=40, y=200-30=170 -->
                <rect x="40" y="170" width="10" height="10" fill="#fff" />
                <text x="40" y="195" fill="#ffb000" font-size="10" font-weight="bold">(x1,y1)</text>

                <!-- P2(16, 9) -> x=160, y=200-90=110 -->
                <rect x="160" y="110" width="10" height="10" fill="#fff" />
                <text x="160" y="105" fill="#ffb000" font-size="10" font-weight="bold">(x2,y2)</text>

                <!-- Calculated Points Animation -->
                <!-- y = 0.5x + 1 -->
                <!-- x=5, y=3.5->3 (int) -> 50, 170 -->
                <rect x="50" y="170" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="0.5s" fill="freeze" />
                </rect>
                <!-- x=6, y=4 -> 60, 160 -->
                <rect x="60" y="160" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="1.0s" fill="freeze" />
                </rect>
                <!-- x=7, y=4.5->4 -> 70, 160 -->
                <rect x="70" y="160" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="1.5s" fill="freeze" />
                </rect>
                <!-- x=8, y=5 -> 80, 150 -->
                <rect x="80" y="150" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="2.0s" fill="freeze" />
                </rect>
                <!-- x=9, y=5.5->5 -> 90, 150 -->
                <rect x="90" y="150" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="2.5s" fill="freeze" />
                </rect>
                <!-- x=10, y=6 -> 100, 140 -->
                <rect x="100" y="140" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="3.0s" fill="freeze" />
                </rect>
                <!-- x=11, y=6.5->6 -> 110, 140 -->
                <rect x="110" y="140" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="3.5s" fill="freeze" />
                </rect>
                <!-- x=12, y=7 -> 120, 130 -->
                <rect x="120" y="130" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="4.0s" fill="freeze" />
                </rect>
                <!-- x=13, y=7.5->7 -> 130, 130 -->
                <rect x="130" y="130" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="4.5s" fill="freeze" />
                </rect>
                <!-- x=14, y=8 -> 140, 120 -->
                <rect x="140" y="120" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="5.0s" fill="freeze" />
                </rect>
                <!-- x=15, y=8.5->8 -> 150, 120 -->
                <rect x="150" y="120" width="10" height="10" fill="#ffb000" opacity="0">
                    <animate attributeName="opacity" values="0;1;1" dur="4s" begin="5.5s" fill="freeze" />
                </rect>

                <!-- Reset Animation Overlay to clear points visually for loop -->
                <rect x="0" y="0" width="200" height="200" fill="#151515" opacity="0" pointer-events="none">
                    <animate attributeName="opacity" values="0;0;1;0" keyTimes="0;0.9;0.95;1" dur="8s"
                        repeatCount="indefinite" />
                </rect>
            </g>

            <!-- Right: Calculation Panel -->
            <g transform="translate(220, 30)">
                <rect width="170" height="200" rx="5" fill="#111" stroke="#00ffff" stroke-width="1" />

                <!-- Header -->
                <text x="10" y="20" fill="#fff" font-size="12" font-weight="bold">CPU 线性插值计算</text>
                <line x1="10" y1="25" x2="160" y2="25" stroke="#444" stroke-width="1" />

                <!-- Step 1: Slope & Intercept -->
                <g font-size="10" fill="#aaa">
                    <text x="10" y="40">已知: P1(4,3), P2(16,9)</text>
                    <text x="10" y="55">斜率 a = (9-3)/(16-4) = 0.5</text>
                    <text x="10" y="70">截距 b = 3 - 0.5*4 = 1</text>
                    <text x="10" y="85" fill="#00ffff">方程: y = 0.5x + 1</text>
                </g>

                <line x1="10" y1="95" x2="160" y2="95" stroke="#444" stroke-width="1" stroke-dasharray="2,2" />

                <!-- Step 2: Loop Calculation -->
                <g transform="translate(10, 110)" font-family="monospace" font-size="10" fill="#ffb000">
                    <text y="0" opacity="0">x=5: y=0.5*5+1=3.5≈3
                        <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="0.5s"
                            repeatCount="indefinite" />
                    </text>
                    <text y="15" opacity="0">x=6: y=0.5*6+1=4
                        <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="1.0s"
                            repeatCount="indefinite" />
                    </text>
                    <text y="30" opacity="0">x=7: y=0.5*7+1=4.5≈4
                        <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="1.5s"
                            repeatCount="indefinite" />
                    </text>
                    <text y="45" opacity="0">x=8: y=0.5*8+1=5
                        <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="2.0s"
                            repeatCount="indefinite" />
                    </text>
                    <text y="60" opacity="0">x=9: y=0.5*9+1=5.5≈5
                        <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="2.5s"
                            repeatCount="indefinite" />
                    </text>
                    <text y="75" opacity="0">...</text>
                </g>

                <!-- CPU Badge -->
                <g transform="translate(120, 170)">
                    <rect width="40" height="20" fill="#333" stroke="#fff" rx="2" />
                    <text x="20" y="14" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold">CPU</text>
                    <!-- Busy Indicator -->
                    <circle cx="35" cy="5" r="2" fill="#ff0000">
                        <animate attributeName="opacity" values="1;0;1" dur="0.5s" repeatCount="indefinite" />
                    </circle>
                </g>
            </g>
        </svg>
        <div class="image-caption">FIG_01.5: 线条光栅化计算原理 (Line Rasterization)</div>
        <div
            style="margin-top: 10px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px; border-left: 2px solid #ffb000;">
            <div style="margin-bottom: 8px; font-weight: bold; color: #fff;">CPU 的困境：简单但繁重</div>
            <p style="margin: 0; line-height: 1.5;">
                虽然计算公式 $y = ax + b$ 很简单，但 CPU 只能<strong>串行</strong>地一个点一个点计算。
                <br>想象一下，一个 3D 游戏画面有几百万条线，每条线有几百个点。让 CPU 逐个计算这些点，就像让一个数学教授去数一袋米有多少粒一样，大材小用且效率极低。
            </p>
        </div>
    </div>
    </div>
    </section>

    <!-- CPU Section -->
    <section class="reveal">
        <h2>02_CPU: 逻辑与控制的大脑 (The Mastermind)</h2>
        <div class="content-grid">
            <div class="image-container">
                <svg width="100%" height="220" viewBox="0 0 400 220" style="background: #151515;">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
                        </marker>
                    </defs>

                    <!-- Connecting Lines (Bus) -->
                    <!-- Adjusted start X to 92 to match center of Queue Rects -->
                    <path d="M 92 52.5 L 160 80" stroke="#333" stroke-width="1" stroke-dasharray="2,2"
                        marker-end="url(#arrowhead)" />
                    <path d="M 92 102.5 L 160 80" stroke="#333" stroke-width="1" stroke-dasharray="2,2"
                        marker-end="url(#arrowhead)" />
                    <path d="M 92 152.5 L 160 80" stroke="#333" stroke-width="1" stroke-dasharray="2,2"
                        marker-end="url(#arrowhead)" />
                    <line x1="240" y1="80" x2="350" y2="80" stroke="#333" stroke-width="1" stroke-dasharray="2,2"
                        marker-end="url(#arrowhead)" />

                    <!-- Task Queues (Left) -->
                    <g transform="translate(20, 40)">
                        <!-- Task A: Music -->
                        <text x="0" y="15" fill="#00ffff" font-size="10">MUSIC Q (音乐队列)</text>
                        <rect x="45" y="5" width="15" height="15" fill="#00ffff" opacity="0.3" stroke="#00ffff"
                            stroke-width="1" />
                        <rect x="65" y="5" width="15" height="15" fill="#00ffff" opacity="0.6" stroke="#00ffff"
                            stroke-width="1">
                            <animate attributeName="opacity" values="0.6;0.1;0.6" dur="3s" begin="0s"
                                repeatCount="indefinite" />
                        </rect>

                        <!-- Task B: Game -->
                        <text x="0" y="65" fill="#ff3333" font-size="10">GAME Q (游戏队列)</text>
                        <rect x="45" y="55" width="15" height="15" fill="#ff3333" opacity="0.3" stroke="#ff3333"
                            stroke-width="1" />
                        <rect x="65" y="55" width="15" height="15" fill="#ff3333" opacity="0.6" stroke="#ff3333"
                            stroke-width="1">
                            <animate attributeName="opacity" values="0.6;0.1;0.6" dur="3s" begin="1s"
                                repeatCount="indefinite" />
                        </rect>

                        <!-- Task C: System -->
                        <text x="0" y="115" fill="#33ff33" font-size="10">SYSTEM Q (系统队列)</text>
                        <rect x="45" y="105" width="15" height="15" fill="#33ff33" opacity="0.3" stroke="#33ff33"
                            stroke-width="1" />
                        <rect x="65" y="105" width="15" height="15" fill="#33ff33" opacity="0.6" stroke="#33ff33"
                            stroke-width="1">
                            <animate attributeName="opacity" values="0.6;0.1;0.6" dur="3s" begin="2s"
                                repeatCount="indefinite" />
                        </rect>
                    </g>

                    <!-- CPU Core (Center) -->
                    <g transform="translate(200, 80)">
                        <!-- Core Box -->
                        <rect x="-40" y="-40" width="80" height="80" fill="#111" stroke="#666" stroke-width="2" rx="5">
                            <animate attributeName="stroke" values="#666;#00ffff;#666;#ff3333;#666;#33ff33;#666"
                                dur="3s" repeatCount="indefinite" />
                        </rect>
                        <text x="0" y="-50" text-anchor="middle" fill="#fff" font-size="10">SINGLE CORE (单核)</text>

                        <!-- Dynamic Text Replacement -->
                        <g font-size="10" font-weight="bold" text-anchor="middle">
                            <!-- Music Text -->
                            <text y="5" fill="#00ffff" opacity="0">PROCESSING (处理中)
                                <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.1;0.25;0.3" dur="3s"
                                    repeatCount="indefinite" />
                            </text>
                            <!-- Game Text -->
                            <text y="5" fill="#ff3333" opacity="0">PROCESSING (处理中)
                                <animate attributeName="opacity" values="0;1;1;0" keyTimes="0.33;0.43;0.58;0.63"
                                    dur="3s" repeatCount="indefinite" />
                            </text>
                            <!-- System Text -->
                            <text y="5" fill="#33ff33" opacity="0">PROCESSING (处理中)
                                <animate attributeName="opacity" values="0;1;1;0" keyTimes="0.66;0.76;0.91;0.96"
                                    dur="3s" repeatCount="indefinite" />
                            </text>

                            <!-- Switching Text -->
                            <text y="20" fill="#666" opacity="0">SWITCHING... (切换中)
                                <animate attributeName="opacity" values="1;0;1;0;1;0"
                                    keyTimes="0;0.1;0.3;0.43;0.63;0.76" dur="3s" repeatCount="indefinite" />
                            </text>
                        </g>

                        <!-- Progress Ring -->
                        <circle cx="0" cy="0" r="30" fill="none" stroke="#444" stroke-width="4" opacity="0.3" />
                        <circle cx="0" cy="0" r="30" fill="none" stroke="#fff" stroke-width="4" stroke-dasharray="188.5"
                            stroke-dashoffset="188.5" transform="rotate(-90)">
                            <animate attributeName="stroke" values="#00ffff;#ff3333;#33ff33" dur="3s"
                                repeatCount="indefinite" />
                            <animate attributeName="stroke-dashoffset" values="188.5;0;188.5;0;188.5;0"
                                keyTimes="0;0.25;0.33;0.58;0.66;0.91" dur="3s" repeatCount="indefinite" />
                        </circle>
                    </g>

                    <!-- Moving Tasks -->
                    <!-- Music Task -->
                    <circle r="6" fill="#00ffff" opacity="0">
                        <animate attributeName="opacity" values="0;1;1;1;0;0" keyTimes="0;0.01;0.25;0.3;0.31;1" dur="3s"
                            repeatCount="indefinite" />
                        <animate attributeName="cx" values="92;92;160;200;200;350;350"
                            keyTimes="0;0.02;0.06;0.1;0.25;0.3;1" dur="3s" repeatCount="indefinite" />
                        <animate attributeName="cy" values="52.5;52.5;80;80;80;80;80"
                            keyTimes="0;0.02;0.06;0.1;0.25;0.3;1" dur="3s" repeatCount="indefinite" />
                    </circle>

                    <!-- Game Task -->
                    <circle r="6" fill="#ff3333" opacity="0">
                        <animate attributeName="opacity" values="0;0;1;1;1;0;0" keyTimes="0;0.33;0.34;0.58;0.63;0.64;1"
                            dur="3s" repeatCount="indefinite" />
                        <animate attributeName="cx" values="92;92;92;160;200;200;350;350"
                            keyTimes="0;0.33;0.35;0.39;0.43;0.58;0.63;1" dur="3s" repeatCount="indefinite" />
                        <animate attributeName="cy" values="102.5;102.5;102.5;80;80;80;80;80"
                            keyTimes="0;0.33;0.35;0.39;0.43;0.58;0.63;1" dur="3s" repeatCount="indefinite" />
                    </circle>

                    <!-- System Task -->
                    <circle r="6" fill="#33ff33" opacity="0">
                        <animate attributeName="opacity" values="0;0;1;1;1;0;0" keyTimes="0;0.66;0.67;0.91;0.96;0.97;1"
                            dur="3s" repeatCount="indefinite" />
                        <animate attributeName="cx" values="92;92;92;160;200;200;350;350"
                            keyTimes="0;0.66;0.68;0.72;0.76;0.91;0.96;1" dur="3s" repeatCount="indefinite" />
                        <animate attributeName="cy" values="152.5;152.5;152.5;80;80;80;80;80"
                            keyTimes="0;0.66;0.68;0.72;0.76;0.91;0.96;1" dur="3s" repeatCount="indefinite" />
                    </circle>

                    <!-- Legend -->
                    <text x="200" y="180" text-anchor="middle" fill="#bbb" font-size="10">CONTEXT SWITCHING
                        OVERHEAD: ~5ms (上下文切换开销)</text>
                </svg>
                <div class="image-caption">FIG_02: 复杂任务调度与上下文切换</div>
                <div
                    style="margin-top: 15px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px; border-left: 2px solid #00ffff;">
                    <div style="margin-bottom: 8px; font-weight: bold; color: #fff;">图解：时间片轮转 (Time Slicing)</div>
                    <ul style="margin: 0; padding-left: 18px; line-height: 1.5;">
                        <li><strong>左侧 (Tasks):</strong> 音乐、游戏、系统进程在排队等待 CPU 资源。</li>
                        <li><strong>中间 (Core):</strong> CPU 核心同一时刻只能处理一个任务（单核视角）。</li>
                        <li><strong>动作 (Switching):</strong> CPU 极速在任务间切换。处理 5ms 音乐 -> 切换 -> 处理 5ms 游戏 -> 切换...</li>
                        <li><strong>错觉:</strong> 因为切换速度极快（纳秒/微秒级），用户感觉所有软件都在"同时"运行。这就是 CPU 强大的逻辑控制能力。</li>
                    </ul>
                </div>

                <!-- New Serial Calculation Demo -->
                <div style="margin-top: 30px; border-top: 1px dashed #333; padding-top: 20px;">
                    <svg width="100%" height="260" viewBox="0 0 400 260" style="background: #151515;">
                        <!-- Definitions -->
                        <defs>
                            <pattern id="gridPattern" width="10" height="10" patternUnits="userSpaceOnUse">
                                <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#333" stroke-width="0.5" />
                            </pattern>
                        </defs>

                        <!-- Left: Coordinate System (200x200) -->
                        <g transform="translate(10, 30)">
                            <!-- Grid -->
                            <rect x="0" y="0" width="200" height="200" fill="url(#gridPattern)" stroke="#555"
                                stroke-width="1" />

                            <!-- Axis Labels -->
                            <text x="-5" y="205" fill="#888" font-size="10">0</text>
                            <text x="205" y="205" fill="#888" font-size="10">X</text>
                            <text x="-5" y="-5" fill="#888" font-size="10">Y</text>

                            <!-- Endpoints (Static) -->
                            <!-- P1(4, 3) -> x=40, y=200-30=170 -->
                            <rect x="40" y="170" width="10" height="10" fill="#fff" />
                            <text x="40" y="195" fill="#ffb000" font-size="10" font-weight="bold">(x1,y1)</text>

                            <!-- P2(16, 9) -> x=160, y=200-90=110 -->
                            <rect x="160" y="110" width="10" height="10" fill="#fff" />
                            <text x="160" y="105" fill="#ffb000" font-size="10" font-weight="bold">(x2,y2)</text>

                            <!-- Calculated Points Animation -->
                            <!-- y = 0.5x + 1 -->
                            <!-- x=5, y=3.5->3 (int) -> 50, 170 -->
                            <rect x="50" y="170" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="0.5s" fill="freeze" />
                            </rect>
                            <!-- x=6, y=4 -> 60, 160 -->
                            <rect x="60" y="160" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="1.0s" fill="freeze" />
                            </rect>
                            <!-- x=7, y=4.5->4 -> 70, 160 -->
                            <rect x="70" y="160" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="1.5s" fill="freeze" />
                            </rect>
                            <!-- x=8, y=5 -> 80, 150 -->
                            <rect x="80" y="150" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="2.0s" fill="freeze" />
                            </rect>
                            <!-- x=9, y=5.5->5 -> 90, 150 -->
                            <rect x="90" y="150" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="2.5s" fill="freeze" />
                            </rect>
                            <!-- x=10, y=6 -> 100, 140 -->
                            <rect x="100" y="140" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="3.0s" fill="freeze" />
                            </rect>
                            <!-- x=11, y=6.5->6 -> 110, 140 -->
                            <rect x="110" y="140" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="3.5s" fill="freeze" />
                            </rect>
                            <!-- x=12, y=7 -> 120, 130 -->
                            <rect x="120" y="130" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="4.0s" fill="freeze" />
                            </rect>
                            <!-- x=13, y=7.5->7 -> 130, 130 -->
                            <rect x="130" y="130" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="4.5s" fill="freeze" />
                            </rect>
                            <!-- x=14, y=8 -> 140, 120 -->
                            <rect x="140" y="120" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="5.0s" fill="freeze" />
                            </rect>
                            <!-- x=15, y=8.5->8 -> 150, 120 -->
                            <rect x="150" y="120" width="10" height="10" fill="#ffb000" opacity="0">
                                <animate attributeName="opacity" values="0;1;1" dur="4s" begin="5.5s" fill="freeze" />
                            </rect>

                            <!-- Reset Animation Overlay to clear points visually for loop -->
                            <rect x="0" y="0" width="200" height="200" fill="#151515" opacity="0" pointer-events="none">
                                <animate attributeName="opacity" values="0;0;1;0" keyTimes="0;0.9;0.95;1" dur="8s"
                                    repeatCount="indefinite" />
                            </rect>
                        </g>

                        <!-- Right: Calculation Panel -->
                        <g transform="translate(220, 30)">
                            <rect width="170" height="200" rx="5" fill="#111" stroke="#00ffff" stroke-width="1" />

                            <!-- Header -->
                            <text x="10" y="20" fill="#fff" font-size="12" font-weight="bold">CPU 线性插值计算</text>
                            <line x1="10" y1="25" x2="160" y2="25" stroke="#444" stroke-width="1" />

                            <!-- Step 1: Slope & Intercept -->
                            <g font-size="10" fill="#aaa">
                                <text x="10" y="40">已知: P1(4,3), P2(16,9)</text>
                                <text x="10" y="55">斜率 a = (9-3)/(16-4) = 0.5</text>
                                <text x="10" y="70">截距 b = 3 - 0.5*4 = 1</text>
                                <text x="10" y="85" fill="#00ffff">方程: y = 0.5x + 1</text>
                            </g>

                            <line x1="10" y1="95" x2="160" y2="95" stroke="#444" stroke-width="1"
                                stroke-dasharray="2,2" />

                            <!-- Step 2: Loop Calculation -->
                            <g transform="translate(10, 110)" font-family="monospace" font-size="10" fill="#ffb000">
                                <text y="0" opacity="0">x=5: y=0.5*5+1=3.5≈3
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="0.5s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="15" opacity="0">x=6: y=0.5*6+1=4
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="1.0s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="30" opacity="0">x=7: y=0.5*7+1=4.5≈4
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="1.5s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="45" opacity="0">x=8: y=0.5*8+1=5
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="2.0s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="60" opacity="0">x=9: y=0.5*9+1=5.5≈5
                                    <animate attributeName="opacity" values="0;1;1;0" dur="8s" begin="2.5s"
                                        repeatCount="indefinite" />
                                </text>
                                <text y="75" opacity="0">...</text>
                            </g>

                            <!-- CPU Badge -->
                            <g transform="translate(120, 170)">
                                <rect width="40" height="20" fill="#333" stroke="#fff" rx="2" />
                                <text x="20" y="14" text-anchor="middle" fill="#fff" font-size="10"
                                    font-weight="bold">CPU</text>
                                <!-- Busy Indicator -->
                                <circle cx="35" cy="5" r="2" fill="#ff0000">
                                    <animate attributeName="opacity" values="1;0;1" dur="0.5s"
                                        repeatCount="indefinite" />
                                </circle>
                            </g>
                        </g>
                    </svg>
                    <div class="image-caption">FIG_03: 3D模型线条生成原理 (Line Rasterization)</div>
                    <div
                        style="margin-top: 10px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px; border-left: 2px solid #ffb000;">
                        <div style="margin-bottom: 8px; font-weight: bold; color: #fff;">特点：顶点存储与实时计算 (Vertex Storage &
                            Real-time Calculation)
                        </div>
                        <p style="margin: 0; line-height: 1.5;">
                            一根线条在计算机中存储时，只记住了两个顶点的坐标信息（如 P1 和 P2）。中间的所有像素点都需要 CPU 实时计算出来。
                            <br><br>
                            <strong>计算方法：</strong><br>
                            1. 根据顶点坐标 $(x_1, y_1)$ 和 $(x_2, y_2)$ 计算斜率 $a$ 和截距 $b$。<br>
                            2. 得到直线方程 $y = ax + b$。<br>
                            3. 将中间每一个点的 $x$ 坐标带入方程，计算出对应的 $y$ 坐标。<br>
                            <br>
                            虽然计算简单，但 CPU 只能一个点一个点地串行计算。对于一个包含数百万条线的 3D 模型，这对 CPU 来说是极其耗时的任务。
                        </p>
                    </div>
                </div>

                <!-- New Complex Geometry Rendering Demo -->
                <div style="margin-top: 30px; border-top: 1px dashed #333; padding-top: 20px;">
                    <svg width="100%" height="220" viewBox="0 0 400 220" style="background: #151515;">
                        <!-- Grid Background (Left Side) -->
                        <defs>
                            <pattern id="wireframeGrid" width="20" height="20" patternUnits="userSpaceOnUse">
                                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#222" stroke-width="1" />
                            </pattern>
                        </defs>
                        <rect x="0" y="20" width="200" height="200" fill="url(#wireframeGrid)" stroke="#444"
                            stroke-width="2" />

                        <!-- Wireframe Character (High Poly Style) -->
                        <g transform="translate(100, 130) scale(0.85)" stroke="#ffb000" stroke-width="0.8" fill="none"
                            stroke-linecap="round" stroke-linejoin="round">
                            <!-- 1. Head & Neck -->
                            <g opacity="0">
                                <!-- Cranium -->
                                <path d="M -10 -85 L 10 -85 L 14 -70 L 0 -60 L -14 -70 Z" />
                                <!-- Face/Jaw -->
                                <path d="M -14 -70 L -8 -55 L 0 -50 L 8 -55 L 14 -70" />
                                <!-- Neck -->
                                <path d="M -8 -55 L -8 -45 M 8 -55 L 8 -45" />
                                <!-- Mesh Details -->
                                <path
                                    d="M 0 -85 L 0 -50 M -10 -85 L 14 -70 M 10 -85 L -14 -70 M -14 -70 L 0 -60 L 14 -70"
                                    stroke-width="0.4" />
                                <animate attributeName="opacity" values="0;1;1;0;0" keyTimes="0;0.1;0.7;0.9;1" dur="10s"
                                    begin="0s" repeatCount="indefinite" />
                            </g>

                            <!-- 2. Torso (Chest & Abs) -->
                            <g opacity="0">
                                <!-- Shoulders -->
                                <path d="M -8 -45 L -25 -45 L -28 -35 M 8 -45 L 25 -45 L 28 -35" />
                                <!-- Chest Box -->
                                <path d="M -25 -45 L 25 -45 L 18 -15 L -18 -15 Z" />
                                <!-- Abdomen -->
                                <path d="M -18 -15 L 18 -15 L 15 10 L -15 10 Z" />
                                <!-- Mesh Details -->
                                <path d="M 0 -45 L 0 10 M -25 -45 L 18 -15 M 25 -45 L -18 -15 M -18 -15 L 0 -5 L 18 -15"
                                    stroke-width="0.4" />
                                <animate attributeName="opacity" values="0;0;1;1;0;0" keyTimes="0;0.1;0.2;0.7;0.9;1"
                                    dur="10s" begin="0s" repeatCount="indefinite" />
                            </g>

                            <!-- 3. Arms (Shoulders to Hands) -->
                            <g opacity="0">
                                <!-- Left Arm -->
                                <path d="M -28 -35 L -35 -10 L -32 15 L -38 25" />
                                <path d="M -28 -35 L -20 -15 L -25 15 L -38 25" stroke-width="0.4" />
                                <!-- Right Arm -->
                                <path d="M 28 -35 L 35 -10 L 32 15 L 38 25" />
                                <path d="M 28 -35 L 20 -15 L 25 15 L 38 25" stroke-width="0.4" />
                                <!-- Joints -->
                                <circle cx="-35" cy="-10" r="2" fill="#ffb000" fill-opacity="0.3" stroke="none" />
                                <circle cx="35" cy="-10" r="2" fill="#ffb000" fill-opacity="0.3" stroke="none" />
                                <animate attributeName="opacity" values="0;0;1;1;0;0" keyTimes="0;0.2;0.3;0.7;0.9;1"
                                    dur="10s" begin="0s" repeatCount="indefinite" />
                            </g>

                            <!-- 4. Hips & Pelvis -->
                            <g opacity="0">
                                <path d="M -15 10 L 15 10 L 20 30 L 0 35 L -20 30 Z" />
                                <path d="M 0 10 L 0 35 M -15 10 L -20 30 M 15 10 L 20 30" stroke-width="0.4" />
                                <animate attributeName="opacity" values="0;0;1;1;0;0" keyTimes="0;0.3;0.4;0.7;0.9;1"
                                    dur="10s" begin="0s" repeatCount="indefinite" />
                            </g>

                            <!-- 5. Legs (Thighs to Feet) -->
                            <g opacity="0">
                                <!-- Left Leg -->
                                <path d="M -20 30 L -25 60 L -22 90 L -28 95" />
                                <path d="M -5 35 L -10 60 L -12 90 L -28 95" stroke-width="0.4" />
                                <!-- Right Leg -->
                                <path d="M 20 30 L 25 60 L 22 90 L 28 95" />
                                <path d="M 5 35 L 10 60 L 12 90 L 28 95" stroke-width="0.4" />
                                <!-- Knees -->
                                <path d="M -25 60 L -10 60 M 25 60 L 10 60" stroke-width="0.4" />
                                <animate attributeName="opacity" values="0;0;1;1;0;0" keyTimes="0;0.4;0.5;0.7;0.9;1"
                                    dur="10s" begin="0s" repeatCount="indefinite" />
                            </g>

                            <!-- 6. Scanline Effect (Processing) -->
                            <g opacity="0">
                                <line x1="-50" y1="-90" x2="50" y2="-90" stroke="#fff" stroke-width="1"
                                    stroke-opacity="0.8">
                                    <animate attributeName="y1" values="-90;-90;100;100" keyTimes="0;0.5;0.7;1"
                                        dur="10s" repeatCount="indefinite" />
                                    <animate attributeName="y2" values="-90;-90;100;100" keyTimes="0;0.5;0.7;1"
                                        dur="10s" repeatCount="indefinite" />
                                </line>
                                <animate attributeName="opacity" values="0;0;0.5;0;0" keyTimes="0;0.5;0.6;0.7;1"
                                    dur="10s" begin="0s" repeatCount="indefinite" />
                            </g>
                        </g>

                        <!-- Calculation Box (Right Side) -->
                        <g transform="translate(210, 20)">
                            <rect width="180" height="180" rx="5" fill="#111" stroke="#00ffff" stroke-width="1" />
                            <text x="10" y="20" fill="#00ffff" font-size="12" font-weight="bold">VERTEX
                                PROCESSING (顶点处理)</text>
                            <line x1="10" y1="25" x2="170" y2="25" stroke="#00ffff" stroke-width="0.5" />

                            <!-- Code Lines -->
                            <g font-family="monospace" font-size="9" fill="#888">
                                <text x="15" y="45">v1 = transform(head_mesh)</text>
                                <text x="15" y="65">v2 = transform(body_mesh)</text>
                                <text x="15" y="85">v3 = transform(arms_mesh)</text>
                                <text x="15" y="105">v4 = transform(hips_mesh)</text>
                                <text x="15" y="125">v5 = transform(legs_mesh)</text>
                                <text x="15" y="145">v6 = compute_lighting(v1..)</text>
                            </g>

                            <!-- Highlighter Box -->
                            <rect x="10" y="35" width="160" height="16" fill="#00ffff" opacity="0.2" rx="2">
                                <animate attributeName="y" values="35;55;75;95;115;135;135"
                                    keyTimes="0;0.1;0.2;0.3;0.4;0.5;1" dur="10s" repeatCount="indefinite"
                                    calcMode="discrete" />
                            </rect>

                            <!-- CPU Badge (Moves with Highlighter) -->
                            <g transform="translate(135, 35)">
                                <animateTransform attributeName="transform" type="translate"
                                    values="135,35; 135,55; 135,75; 135,95; 135,115; 135,135; 135,135"
                                    keyTimes="0;0.1;0.2;0.3;0.4;0.5;1" dur="10s" repeatCount="indefinite"
                                    calcMode="discrete" />
                                <rect x="0" y="2" width="30" height="12" rx="2" fill="#fff" />
                                <text x="15" y="11" text-anchor="middle" fill="#000" font-size="9"
                                    font-weight="bold">CPU</text>
                            </g>

                            <!-- Active Text Highlight -->
                            <g font-family="monospace" font-size="9" fill="#fff" font-weight="bold">
                                <text x="15" y="45" opacity="0">v1 = transform(head_mesh)
                                    <animate attributeName="opacity" values="1;0;0" keyTimes="0;0.1;1" dur="10s"
                                        begin="0s" repeatCount="indefinite" />
                                </text>
                                <text x="15" y="65" opacity="0">v2 = transform(body_mesh)
                                    <animate attributeName="opacity" values="0;1;0;0" keyTimes="0;0.1;0.2;1" dur="10s"
                                        begin="0s" repeatCount="indefinite" />
                                </text>
                                <text x="15" y="85" opacity="0">v3 = transform(arms_mesh)
                                    <animate attributeName="opacity" values="0;0;1;0;0" keyTimes="0;0.2;0.3;1" dur="10s"
                                        begin="0s" repeatCount="indefinite" />
                                </text>
                                <text x="15" y="105" opacity="0">v4 = transform(hips_mesh)
                                    <animate attributeName="opacity" values="0;0;0;1;0;0" keyTimes="0;0.3;0.4;1"
                                        dur="10s" begin="0s" repeatCount="indefinite" />
                                </text>
                                <text x="15" y="125" opacity="0">v5 = transform(legs_mesh)
                                    <animate attributeName="opacity" values="0;0;0;0;1;0;0" keyTimes="0;0.4;0.5;1"
                                        dur="10s" begin="0s" repeatCount="indefinite" />
                                </text>
                                <text x="15" y="145" opacity="0">v6 = compute_lighting(v1..)
                                    <animate attributeName="opacity" values="0;0;0;0;0;1;0" keyTimes="0;0.5;0.7;1"
                                        dur="10s" begin="0s" repeatCount="indefinite" />
                                </text>
                            </g>
                        </g>
                    </svg>
                    <div class="image-caption">FIG_04: 复杂几何体渲染 (Complex Geometry)</div>
                    <div
                        style="margin-top: 10px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px; border-left: 2px solid #ffb000;">
                        <div style="margin-bottom: 8px; font-weight: bold; color: #fff;">特点：多边形逐个处理 (Polygon by
                            Polygon)</div>
                        <p style="margin: 0; line-height: 1.5;">
                            在处理 3D 角色模型时，CPU 需要计算成千上万个顶点的坐标变换（Vertex Transformation）。
                            <br><br>
                            如图所示，CPU 只能<strong>按顺序</strong>先算头部，再算躯干，最后算四肢。对于现代游戏动辄数百万面的模型，这种"排队计算"的方式会导致严重的性能瓶颈。
                        </p>
                    </div>
                </div>
            </div>
            <div>
                <p>CPU (Central Processing Unit) 是逻辑与控制的大师。它不追求同时做一万件事，但追求把每一件复杂的事做到极致快。</p>

                <h3>> 核心长处 (Core Strengths)</h3>
                <ul>
                    <li><strong>复杂逻辑 (Complex Logic):</strong> 擅长处理大量的 if-else 分支、循环跳转和条件判断。</li>
                    <li><strong>低延迟 (Low Latency):</strong> 拥有极高的主频 (3GHz+) 和多级缓存，对指令的响应速度是纳秒级的。</li>
                    <li><strong>分支预测 (Branch Prediction):</strong> 能预判代码的走向，提前加载指令，极大减少等待时间。</li>
                </ul>

                <h3>> 实际案例：操作系统任务调度</h3>
                <div class="highlight-box"
                    style="border-left: 3px solid var(--accent-cyan); background: rgba(0, 255, 255, 0.05); padding: 10px; font-size: 0.9rem;">
                    <p style="margin:0;"><strong>场景：</strong> 你一边听歌，一边打字，后台还在下载文件。</p>
                    <p style="margin-top:5px; color: #eee;">虽然看起来是同时进行的，但其实 CPU 在以极快的速度（每秒数千次）在这些任务间<strong>切换
                            (Context Switch)</strong>。它需要瞬间保存"听歌"的进度，加载"打字"的指令，处理完键盘输入后，再切回"下载"。这种复杂的流程控制和资源调度，只有
                        CPU 能胜任。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- GPU Section -->
    <section class="reveal">
        <h2>03_GPU: 暴力美学的并行大军 (The Powerhouse)</h2>
        <div class="content-grid">
            <div>
                <p>GPU (Graphics Processing Unit) 是为大规模并行计算而生的怪兽。它不擅长复杂的逻辑跳转，但擅长"人海战术"。</p>

                <h3>> 核心长处 (Core Strengths)</h3>
                <ul>
                    <li><strong>海量核心 (Massive Cores):</strong> 拥有数千甚至上万个计算核心 (CUDA Cores)，虽然单个核心较弱，但总量惊人。</li>
                    <li><strong>高吞吐量 (High Throughput):</strong> 能在同一时间处理海量数据，适合 SIMD (单指令多数据) 任务。</li>
                    <li><strong>高带宽显存 (HBM/GDDR):</strong> 拥有极宽的数据传输通道，确保海量数据能及时喂给核心。</li>
                </ul>

                <h3>> 实际案例：4K 游戏画面渲染</h3>
                <div class="highlight-box"
                    style="border-left: 3px solid var(--accent-red); background: rgba(255, 51, 51, 0.05); padding: 10px; font-size: 0.9rem;">
                    <p style="margin:0;"><strong>场景：</strong> 渲染一帧 4K 分辨率的《赛博朋克 2077》画面。</p>
                    <p style="margin-top:5px; color: #eee;">屏幕上有 <strong>8,294,400 个像素点</strong>。每个像素都需要计算光照、纹理和颜色。这
                        800 万次计算是<strong>相互独立且公式相同</strong>的。GPU 可以一声令下，让数千个核心同时开工，瞬间完成这 800 万次计算。如果让 CPU
                        来做，它得一个一个算，画面会卡成 PPT。</p>
                </div>

                <h3 style="margin-top: 25px;">> 进化：GPGPU (通用计算)</h3>
                <p>早期的 GPU 只负责画图。但后来人们发现，这种"几千个人同时做算术题"的能力，不仅能用来算像素颜色，还能用来算任何<strong>大规模并行数据</strong>。</p>
                <div class="highlight-box"
                    style="border-left: 3px solid #ff9900; background: rgba(255, 153, 0, 0.05); padding: 10px; font-size: 0.9rem;">
                    <p style="margin:0;"><strong>从绘图到计算的飞跃：</strong></p>
                    <ul style="margin-top:5px; padding-left: 20px; color: #ccc; margin-bottom: 0;">
                        <li><strong>密码破解/挖矿:</strong> 尝试亿万次密码组合，正是 GPU 的拿手好戏。</li>
                        <li><strong>物理模拟:</strong> 游戏中成千上万的水滴、爆炸碎片、头发丝的运动轨迹计算。</li>
                        <li><strong>AI 深度学习:</strong> 在 NPU 普及之前，GPU 是 AI 的主力军，因为神经网络训练本质上就是海量的矩阵乘法。</li>
                    </ul>
                </div>
            </div>
            <div>
                <div class="image-container">
                    <svg width="100%" height="240" viewBox="0 0 400 240" style="background: #151515;">
                        <defs>
                            <pattern id="small-grid" width="10" height="10" patternUnits="userSpaceOnUse">
                                <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#333" stroke-width="0.5" />
                            </pattern>
                        </defs>

                        <!-- 1. GPU Cores (Left) -->
                        <g transform="translate(20, 40)">
                            <text x="60" y="-15" text-anchor="middle" fill="#ff3333" font-size="10"
                                font-weight="bold">GPU CORES (GPU核心)</text>
                            <!-- Core Grid Background -->
                            <rect x="0" y="0" width="120" height="160" fill="#111" stroke="#ff3333" stroke-width="1" />

                            <!-- Individual Cores (ALUs) -->
                            <g id="alu-grid" fill="#444">
                                <!-- 4x5 Grid of Cores -->
                                <rect x="10" y="10" width="20" height="20" rx="2" />
                                <rect x="40" y="10" width="20" height="20" rx="2" />
                                <rect x="70" y="10" width="20" height="20" rx="2" />
                                <rect x="10" y="40" width="20" height="20" rx="2" />
                                <rect x="40" y="40" width="20" height="20" rx="2" />
                                <rect x="70" y="40" width="20" height="20" rx="2" />
                                <rect x="10" y="70" width="20" height="20" rx="2" />
                                <rect x="40" y="70" width="20" height="20" rx="2" />
                                <rect x="70" y="70" width="20" height="20" rx="2" />
                                <rect x="10" y="100" width="20" height="20" rx="2" />
                                <rect x="40" y="100" width="20" height="20" rx="2" />
                                <rect x="70" y="100" width="20" height="20" rx="2" />
                                <rect x="10" y="130" width="20" height="20" rx="2" />
                                <rect x="40" y="130" width="20" height="20" rx="2" />
                                <rect x="70" y="130" width="20" height="20" rx="2" />
                            </g>

                            <!-- Active Core Animation (Random flashing red) -->
                            <rect x="10" y="10" width="20" height="20" rx="2" fill="#ff3333" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.5s" begin="0s"
                                    repeatCount="indefinite" />
                            </rect>
                            <rect x="70" y="40" width="20" height="20" rx="2" fill="#ff3333" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.6s" begin="0.1s"
                                    repeatCount="indefinite" />
                            </rect>
                            <rect x="40" y="70" width="20" height="20" rx="2" fill="#ff3333" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.4s" begin="0.2s"
                                    repeatCount="indefinite" />
                            </rect>
                            <rect x="10" y="130" width="20" height="20" rx="2" fill="#ff3333" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.7s" begin="0.3s"
                                    repeatCount="indefinite" />
                            </rect>
                            <rect x="70" y="100" width="20" height="20" rx="2" fill="#ff3333" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.5s" begin="0.4s"
                                    repeatCount="indefinite" />
                            </rect>
                        </g>

                        <!-- 2. Data Bus (Middle) -->
                        <g transform="translate(150, 100)">
                            <text x="40" y="-40" text-anchor="middle" fill="#666" font-size="8">PARALLEL BUS
                                (并行总线)</text>
                            <!-- Bus Lines -->
                            <line x1="0" y1="-20" x2="80" y2="-20" stroke="#333" stroke-width="2" />
                            <line x1="0" y1="0" x2="80" y2="0" stroke="#333" stroke-width="2" />
                            <line x1="0" y1="20" x2="80" y2="20" stroke="#333" stroke-width="2" />

                            <!-- Data Packets -->
                            <circle cx="0" cy="-20" r="3" fill="#ff3333">
                                <animate attributeName="cx" values="0;80" dur="0.5s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;0" dur="0.5s" repeatCount="indefinite" />
                            </circle>
                            <circle cx="0" cy="0" r="3" fill="#ff3333">
                                <animate attributeName="cx" values="0;80" dur="0.6s" begin="0.1s"
                                    repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0.1s"
                                    repeatCount="indefinite" />
                            </circle>
                            <circle cx="0" cy="20" r="3" fill="#ff3333">
                                <animate attributeName="cx" values="0;80" dur="0.4s" begin="0.2s"
                                    repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="0.2s"
                                    repeatCount="indefinite" />
                            </circle>
                        </g>

                        <!-- 3. Screen Buffer (Right) -->
                        <g transform="translate(240, 40)">
                            <text x="60" y="-15" text-anchor="middle" fill="#ccc" font-size="10" font-weight="bold">4K
                                FRAME BUFFER (4K帧缓存)</text>

                            <!-- Screen Frame -->
                            <rect x="0" y="0" width="140" height="160" fill="#000" stroke="#666" stroke-width="2" />

                            <!-- Wireframe Grid (Background) -->
                            <rect x="0" y="0" width="140" height="160" fill="url(#small-grid)" opacity="0.3" />

                            <!-- Rendering Tiles (Simulating Parallel Rendering) -->
                            <!-- Tile 1 -->
                            <rect x="10" y="10" width="30" height="30" fill="#ff3333" opacity="0.2">
                                <animate attributeName="opacity" values="0.2;0.8;0.2" dur="2s" begin="0s"
                                    repeatCount="indefinite" />
                            </rect>
                            <!-- Tile 2 -->
                            <rect x="50" y="10" width="30" height="30" fill="#ff3333" opacity="0.1">
                                <animate attributeName="opacity" values="0.1;0.9;0.1" dur="2.3s" begin="0.5s"
                                    repeatCount="indefinite" />
                            </rect>
                            <!-- Tile 3 -->
                            <rect x="90" y="50" width="30" height="30" fill="#ff3333" opacity="0.1">
                                <animate attributeName="opacity" values="0.1;0.7;0.1" dur="1.8s" begin="1s"
                                    repeatCount="indefinite" />
                            </rect>
                            <!-- Tile 4 -->
                            <rect x="10" y="90" width="30" height="30" fill="#ff3333" opacity="0.1">
                                <animate attributeName="opacity" values="0.1;0.8;0.1" dur="2.1s" begin="0.2s"
                                    repeatCount="indefinite" />
                            </rect>
                            <!-- Tile 5 -->
                            <rect x="50" y="120" width="30" height="30" fill="#ff3333" opacity="0.1">
                                <animate attributeName="opacity" values="0.1;0.9;0.1" dur="1.9s" begin="0.7s"
                                    repeatCount="indefinite" />
                            </rect>

                            <!-- Scanline Effect (Post-processing) -->
                            <line x1="0" y1="0" x2="140" y2="0" stroke="#fff" stroke-width="1" opacity="0.5">
                                <animate attributeName="y1" values="0;160" dur="3s" repeatCount="indefinite" />
                                <animate attributeName="y2" values="0;160" dur="3s" repeatCount="indefinite" />
                            </line>
                        </g>

                        <!-- Labels -->
                        <text x="200" y="220" text-anchor="middle" fill="#666" font-size="10">PARALLEL TILE
                            RENDERING (并行分块渲染)</text>
                    </svg>
                    <div class="image-caption">FIG_03: GPU 并行渲染管线示意图</div>
                    <div
                        style="margin-top: 15px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px; border-left: 2px solid #ff3333;">
                        <div style="margin-bottom: 8px; font-weight: bold; color: #fff;">图解：像素级并行 (Pixel-Level
                            Parallelism)</div>
                        <ul style="margin: 0; padding-left: 18px; line-height: 1.5;">
                            <li><strong>左侧 (Cores):</strong> 每一个闪烁的小方块代表一个 GPU 核心 (ALU)。</li>
                            <li><strong>右侧 (Screen):</strong> 屏幕画面被切分成无数个小方块 (Tiles)。</li>
                            <li><strong>工作原理:</strong> GPU 并不是像打印机一样一行行画图，而是<strong>"分包"</strong>。核心 1 负责渲染左上角的
                                Tile，核心
                                2 负责右下角的 Tile... 数千个核心同时领任务，同时计算。</li>
                            <li><strong>结果:</strong> 800 万个像素点在 1/60 秒内被几千个核心"一拥而上"全部填满颜色。这就是为什么 GPU 玩游戏快，而 CPU
                                慢（CPU
                                只能一个一个画）。</li>
                        </ul>
                    </div>
                </div>

                <!-- GPGPU Diagram -->
                <div class="image-container" style="margin-top: 20px;">
                    <div>
                        <svg width="100%" height="180" viewBox="0 0 400 180"
                            style="background: #151515; border: 1px solid #333;">
                            <!-- 1. Input Data (Top) -->
                            <text x="200" y="20" text-anchor="middle" fill="#ff9900" font-size="10"
                                font-weight="bold">INPUT DATA (输入数据: 密码/物理)</text>
                            <g id="input-stream">
                                <rect x="50" y="30" width="300" height="20" fill="none" stroke="#444" />

                                <!-- Data Blocks Group -->
                                <g fill="#ff9900" opacity="0.8">
                                    <rect x="60" y="32" width="16" height="16" />
                                    <rect x="80" y="32" width="16" height="16" />
                                    <rect x="100" y="32" width="16" height="16" />
                                    <rect x="120" y="32" width="16" height="16" />
                                    <rect x="140" y="32" width="16" height="16" />
                                    <rect x="160" y="32" width="16" height="16" />
                                    <rect x="180" y="32" width="16" height="16" />
                                    <rect x="200" y="32" width="16" height="16" />
                                    <rect x="220" y="32" width="16" height="16" />
                                    <rect x="240" y="32" width="16" height="16" />
                                    <rect x="260" y="32" width="16" height="16" />
                                    <rect x="280" y="32" width="16" height="16" />
                                    <rect x="300" y="32" width="16" height="16" />
                                    <rect x="320" y="32" width="16" height="16" />

                                    <!-- Animation: Move Down -> Pause (Compute) -> Move Down -->
                                    <animateTransform attributeName="transform" type="translate"
                                        values="0,0; 0,48; 0,48; 0,98" keyTimes="0; 0.4; 0.6; 1" dur="2s"
                                        repeatCount="indefinite" />
                                    <!-- Animation: Flash White during Compute -->
                                    <animate attributeName="fill" values="#ff9900; #ff9900; #ffffff; #ff9900"
                                        keyTimes="0; 0.4; 0.5; 0.6" dur="2s" repeatCount="indefinite" />
                                </g>
                            </g>

                            <!-- 2. Compute Cores (Middle) -->
                            <g transform="translate(0, 70)">
                                <text x="25" y="25" fill="#ff9900" font-size="10">PARALLEL COMPUTE (并行计算)</text>
                                <!-- Cores -->
                                <g fill="none" stroke="#ff9900" stroke-width="1">
                                    <rect x="60" y="10" width="16" height="30" />
                                    <rect x="80" y="10" width="16" height="30" />
                                    <rect x="100" y="10" width="16" height="30" />
                                    <rect x="120" y="10" width="16" height="30" />
                                    <rect x="140" y="10" width="16" height="30" />
                                    <rect x="160" y="10" width="16" height="30" />
                                    <rect x="180" y="10" width="16" height="30" />
                                    <rect x="200" y="10" width="16" height="30" />
                                    <rect x="220" y="10" width="16" height="30" />
                                    <rect x="240" y="10" width="16" height="30" />
                                    <rect x="260" y="10" width="16" height="30" />
                                    <rect x="280" y="10" width="16" height="30" />
                                    <rect x="300" y="10" width="16" height="30" />
                                    <rect x="320" y="10" width="16" height="30" />
                                </g>
                            </g>

                            <!-- 3. Output Data (Bottom) -->
                            <g transform="translate(0, 130)">
                                <text x="200" y="35" text-anchor="middle" fill="#fff" font-size="10">PROCESSED
                                    RESULTS (处理结果)</text>
                                <rect x="50" y="0" width="300" height="20" fill="none" stroke="#444" />
                            </g>
                        </svg>
                        <div class="image-caption">FIG_03_B: GPGPU 通用并行计算流</div>

                        <!-- Explanation for FIG_03_B -->
                        <div
                            style="margin-top: 10px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 153, 0, 0.05); padding: 10px; border-radius: 4px; border-left: 2px solid #ff9900;">
                            <div style="margin-bottom: 5px; font-weight: bold; color: #fff;">图解：SIMD (单指令多数据)</div>
                            <ul style="margin: 0; padding-left: 18px; line-height: 1.4;">
                                <li><strong>输入流:</strong> 不再是图像纹理，而是纯数据（如加密哈希、物理坐标）。</li>
                                <li><strong>并行计算:</strong>
                                    所有的核心执行<strong>同一个程序</strong>（Kernel），但处理<strong>不同的数据块</strong>。</li>
                                <li><strong>效率:</strong> 就像工厂流水线，一个指令发出，成百上千个零件同时被加工。</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- GPGPU Architecture Diagram -->
                <div class="image-container" style="margin-top: 20px;">
                    <div>
                        <svg width="100%" height="220" viewBox="0 0 400 220"
                            style="background: #151515; border: 1px solid #333;">
                            <defs>
                                <pattern id="mem-pattern" width="4" height="4" patternUnits="userSpaceOnUse">
                                    <rect width="4" height="4" fill="#1a1a1a" />
                                    <circle cx="2" cy="2" r="1" fill="#333" />
                                </pattern>
                            </defs>

                            <!-- 1. Global Memory (Bottom) -->
                            <g transform="translate(20, 170)">
                                <rect x="0" y="0" width="360" height="40" fill="url(#mem-pattern)" stroke="#666"
                                    stroke-width="2" />
                                <text x="180" y="25" text-anchor="middle" fill="#fff" font-size="12"
                                    font-weight="bold">GLOBAL MEMORY (全局显存 HBM/GDDR6)</text>
                                <!-- Data moving up -->
                                <circle cx="50" cy="0" r="3" fill="#00ff00" opacity="0">
                                    <animate attributeName="cy" values="20;-40" dur="1s" repeatCount="indefinite" />
                                    <animate attributeName="opacity" values="1;0" dur="1s" repeatCount="indefinite" />
                                </circle>
                                <circle cx="150" cy="0" r="3" fill="#00ff00" opacity="0">
                                    <animate attributeName="cy" values="20;-40" dur="1.2s" begin="0.2s"
                                        repeatCount="indefinite" />
                                    <animate attributeName="opacity" values="1;0" dur="1.2s" begin="0.2s"
                                        repeatCount="indefinite" />
                                </circle>
                                <circle cx="250" cy="0" r="3" fill="#00ff00" opacity="0">
                                    <animate attributeName="cy" values="20;-40" dur="0.9s" begin="0.5s"
                                        repeatCount="indefinite" />
                                    <animate attributeName="opacity" values="1;0" dur="0.9s" begin="0.5s"
                                        repeatCount="indefinite" />
                                </circle>
                                <circle cx="310" cy="0" r="3" fill="#00ff00" opacity="0">
                                    <animate attributeName="cy" values="20;-40" dur="1.1s" begin="0.1s"
                                        repeatCount="indefinite" />
                                    <animate attributeName="opacity" values="1;0" dur="1.1s" begin="0.1s"
                                        repeatCount="indefinite" />
                                </circle>
                            </g>

                            <!-- 2. L2 Cache (Middle) -->
                            <g transform="translate(40, 130)">
                                <rect x="0" y="0" width="320" height="20" fill="#222" stroke="#888" stroke-width="1" />
                                <text x="160" y="14" text-anchor="middle" fill="#aaa" font-size="10">L2 CACHE
                                    (共享二级缓存)</text>
                            </g>

                            <!-- 3. Streaming Multiprocessors (SMs) (Top) -->
                            <g transform="translate(20, 20)">
                                <!-- SM 1 (Detailed View) -->
                                <g transform="translate(0, 0)">
                                    <rect x="0" y="0" width="110" height="90" fill="#111" stroke="#ff9900"
                                        stroke-width="2" />
                                    <text x="55" y="15" text-anchor="middle" fill="#ff9900" font-size="10"
                                        font-weight="bold">SM 01 (流多处理器)</text>

                                    <!-- Control Unit -->
                                    <rect x="10" y="20" width="90" height="8" fill="#444" />
                                    <text x="55" y="26" text-anchor="middle" fill="#000" font-size="6">CONTROL
                                        (控制)</text>

                                    <!-- Cores Area -->
                                    <g transform="translate(10, 32)">
                                        <!-- CUDA Cores (Green) -->
                                        <rect x="0" y="0" width="40" height="20" fill="none" stroke="#00ff00"
                                            stroke-width="0.5" />
                                        <text x="20" y="12" text-anchor="middle" fill="#00ff00" font-size="6">CUDA
                                            (通用)</text>
                                        <rect x="2" y="2" width="4" height="4" fill="#00ff00" opacity="0.8">
                                            <animate attributeName="opacity" values="0.2;1;0.2" dur="0.5s"
                                                repeatCount="indefinite" />
                                        </rect>
                                        <rect x="8" y="2" width="4" height="4" fill="#00ff00" opacity="0.8">
                                            <animate attributeName="opacity" values="0.2;1;0.2" dur="0.6s"
                                                repeatCount="indefinite" />
                                        </rect>

                                        <!-- Tensor Cores (Purple) -->
                                        <rect x="50" y="0" width="40" height="20" fill="none" stroke="#d000ff"
                                            stroke-width="0.5" />
                                        <text x="70" y="12" text-anchor="middle" fill="#d000ff" font-size="6">TENSOR
                                            (张量)</text>
                                        <rect x="52" y="2" width="8" height="8" fill="#d000ff" opacity="0.8">
                                            <animate attributeName="opacity" values="0.2;1;0.2" dur="1s"
                                                repeatCount="indefinite" />
                                        </rect>

                                        <!-- RT Cores (Yellow) -->
                                        <rect x="0" y="25" width="90" height="15" fill="none" stroke="#ffcc00"
                                            stroke-width="0.5" />
                                        <text x="45" y="35" text-anchor="middle" fill="#ffcc00" font-size="6">RT
                                            CORE (光追核心)</text>
                                        <circle cx="80" cy="32" r="3" fill="#ffcc00" opacity="0.8">
                                            <animate attributeName="opacity" values="0.2;1;0.2" dur="2s"
                                                repeatCount="indefinite" />
                                        </circle>
                                    </g>

                                    <!-- L1 Cache -->
                                    <rect x="10" y="78" width="90" height="8" fill="#666" />
                                    <text x="55" y="84" text-anchor="middle" fill="#fff" font-size="6">L1
                                        CACHE (一级缓存)</text>
                                </g>

                                <!-- SM 2 (Simplified) -->
                                <g transform="translate(125, 0)">
                                    <rect x="0" y="0" width="110" height="90" fill="#111" stroke="#ff9900"
                                        stroke-width="2" />
                                    <text x="55" y="15" text-anchor="middle" fill="#ff9900" font-size="10"
                                        font-weight="bold">SM 02</text>
                                    <rect x="10" y="20" width="90" height="8" fill="#444" />

                                    <!-- Simplified Cores -->
                                    <g transform="translate(10, 32)">
                                        <rect x="0" y="0" width="40" height="20" fill="none" stroke="#00ff00"
                                            stroke-width="0.5" />
                                        <rect x="50" y="0" width="40" height="20" fill="none" stroke="#d000ff"
                                            stroke-width="0.5" />
                                        <rect x="0" y="25" width="90" height="15" fill="none" stroke="#ffcc00"
                                            stroke-width="0.5" />
                                    </g>
                                    <rect x="10" y="78" width="90" height="8" fill="#666" />
                                </g>

                                <!-- SM 3 (Simplified) -->
                                <g transform="translate(250, 0)">
                                    <rect x="0" y="0" width="110" height="90" fill="#111" stroke="#ff9900"
                                        stroke-width="2" />
                                    <text x="55" y="15" text-anchor="middle" fill="#ff9900" font-size="10"
                                        font-weight="bold">SM 03</text>
                                    <rect x="10" y="20" width="90" height="8" fill="#444" />

                                    <!-- Simplified Cores -->
                                    <g transform="translate(10, 32)">
                                        <rect x="0" y="0" width="40" height="20" fill="none" stroke="#00ff00"
                                            stroke-width="0.5" />
                                        <rect x="50" y="0" width="40" height="20" fill="none" stroke="#d000ff"
                                            stroke-width="0.5" />
                                        <rect x="0" y="25" width="90" height="15" fill="none" stroke="#ffcc00"
                                            stroke-width="0.5" />
                                    </g>
                                    <rect x="10" y="78" width="90" height="8" fill="#666" />
                                </g>
                            </g>
                        </svg>
                        <div class="image-caption">FIG_03_C: GPGPU 硬件架构 (SMs & Memory Hierarchy)</div>

                        <!-- Core Capabilities Legend -->
                        <div
                            style="margin-top: 10px; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 0.8rem;">
                            <div
                                style="background: rgba(0, 255, 0, 0.1); padding: 8px; border-radius: 4px; border-top: 2px solid #00ff00;">
                                <strong style="color: #00ff00; display: block; margin-bottom: 4px;">CUDA
                                    Cores</strong>
                                <span style="color: #ccc;">通用计算主力。擅长传统图形渲染、物理模拟和通用数学计算 (FP32)。</span>
                            </div>
                            <div
                                style="background: rgba(208, 0, 255, 0.1); padding: 8px; border-radius: 4px; border-top: 2px solid #d000ff;">
                                <strong style="color: #d000ff; display: block; margin-bottom: 4px;">Tensor
                                    Cores</strong>
                                <span style="color: #ccc;">AI 加速引擎。专为深度学习矩阵运算设计，混合精度计算 (FP16/INT8) 速度极快。</span>
                            </div>
                            <div
                                style="background: rgba(255, 204, 0, 0.1); padding: 8px; border-radius: 4px; border-top: 2px solid #ffcc00;">
                                <strong style="color: #ffcc00; display: block; margin-bottom: 4px;">RT
                                    Cores</strong>
                                <span style="color: #ccc;">光追专用单元。专门计算光线与物体的求交，实现逼真的光影反射效果。</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Matrix Multiplication Diagram (Tiled + Cache) -->
                <div class="image-container" style="margin-top: 20px;">
                    <svg width="100%" height="360" viewBox="0 0 500 360"
                        style="background: #151515; border: 1px solid #333;">
                        <defs>
                            <!-- Arrow Head Marker -->
                            <marker id="arrow-head" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"
                                markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#666" />
                            </marker>
                            <!-- Data Block (Tile) -->
                            <symbol id="data-tile" viewBox="0 0 40 40">
                                <rect x="0" y="0" width="40" height="40" fill="none" stroke="currentColor"
                                    stroke-width="2" />
                                <rect x="2" y="2" width="16" height="16" fill="currentColor" opacity="0.5" />
                                <rect x="22" y="2" width="16" height="16" fill="currentColor" opacity="0.5" />
                                <rect x="2" y="22" width="16" height="16" fill="currentColor" opacity="0.5" />
                                <rect x="22" y="22" width="16" height="16" fill="currentColor" opacity="0.5" />
                            </symbol>
                            <!-- Core Icon -->
                            <symbol id="core-icon" viewBox="0 0 20 20">
                                <rect x="0" y="0" width="20" height="20" fill="#222" stroke="#33ff33"
                                    stroke-width="1" />
                                <circle cx="10" cy="10" r="4" fill="#33ff33">
                                    <animate attributeName="opacity" values="0.2;1;0.2" dur="0.5s"
                                        repeatCount="indefinite" />
                                </circle>
                            </symbol>
                        </defs>

                        <!-- Background Zones -->
                        <!-- Global Memory Zone -->
                        <rect x="10" y="10" width="480" height="340" fill="none" stroke="#333" stroke-dasharray="5,5"
                            rx="10" />
                        <text x="30" y="30" fill="#666" font-size="10" font-weight="bold">GLOBAL MEMORY (全局显存 -
                            慢/远)</text>

                        <!-- GPU Chip Zone -->
                        <rect x="120" y="80" width="260" height="200" fill="#111" stroke="#888" stroke-width="2"
                            rx="5" />
                        <text x="130" y="100" fill="#fff" font-size="10" font-weight="bold">GPU CHIP (GPU芯片 -
                            快/近)</text>

                        <!-- 1. Source Matrices (Global Memory) -->
                        <!-- Matrix A (Left) -->
                        <g transform="translate(30, 120)" color="#ff3333">
                            <text x="20" y="-10" text-anchor="middle" fill="#ff3333" font-size="10">MATRIX A
                                (矩阵A)</text>
                            <rect x="0" y="0" width="40" height="120" fill="none" stroke="#444" />
                            <!-- Moving Tile A -->
                            <g>
                                <use href="#data-tile" x="0" y="0" width="40" height="40" />
                                <animateTransform attributeName="transform" type="translate"
                                    values="0,0; 110,0; 110,0; 110,0" keyTimes="0; 0.3; 0.8; 1" dur="3s"
                                    repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;1;0;0" keyTimes="0; 0.3; 0.8; 1" dur="3s"
                                    repeatCount="indefinite" />
                            </g>
                            <rect x="0" y="40" width="40" height="40" fill="none" stroke="#333" />
                            <rect x="0" y="80" width="40" height="40" fill="none" stroke="#333" />
                        </g>

                        <!-- Matrix B (Top) -->
                        <g transform="translate(180, 30)" color="#00ffff">
                            <text x="60" y="0" text-anchor="middle" fill="#00ffff" font-size="10">MATRIX B
                                (矩阵B)</text>
                            <rect x="0" y="10" width="120" height="40" fill="none" stroke="#444" />
                            <!-- Moving Tile B -->
                            <g>
                                <use href="#data-tile" x="0" y="10" width="40" height="40" />
                                <animateTransform attributeName="transform" type="translate"
                                    values="0,0; 0,60; 0,60; 0,60" keyTimes="0; 0.3; 0.8; 1" dur="3s"
                                    repeatCount="indefinite" />
                                <animate attributeName="opacity" values="1;1;0;0" keyTimes="0; 0.3; 0.8; 1" dur="3s"
                                    repeatCount="indefinite" />
                            </g>
                            <rect x="40" y="10" width="40" height="40" fill="none" stroke="#333" />
                            <rect x="80" y="10" width="40" height="40" fill="none" stroke="#333" />
                        </g>

                        <!-- 2. Shared Memory / L1 Cache (On-Chip) -->
                        <g transform="translate(140, 120)">
                            <rect x="0" y="0" width="100" height="100" fill="#222" stroke="#ffcc00" stroke-width="2"
                                stroke-dasharray="4,2" />
                            <text x="50" y="-10" text-anchor="middle" fill="#ffcc00" font-size="10"
                                font-weight="bold">SHARED MEMORY / CACHE (共享内存/缓存)</text>
                            <text x="50" y="115" text-anchor="middle" fill="#ffcc00" font-size="8">DATA REUSE
                                ZONE (数据复用区)</text>

                            <!-- Cached Tile A (Ghost) -->
                            <use href="#data-tile" x="10" y="30" width="40" height="40" color="#ff3333" opacity="0">
                                <animate attributeName="opacity" values="0;1;1;0" keyTimes="0; 0.3; 0.8; 1" dur="3s"
                                    repeatCount="indefinite" />
                            </use>
                            <!-- Cached Tile B (Ghost) -->
                            <use href="#data-tile" x="50" y="30" width="40" height="40" color="#00ffff" opacity="0">
                                <animate attributeName="opacity" values="0;1;1;0" keyTimes="0; 0.3; 0.8; 1" dur="3s"
                                    repeatCount="indefinite" />
                            </use>

                            <!-- Fast Data Paths to Cores -->
                            <path d="M100 50 L140 50" stroke="#ffcc00" stroke-width="2">
                                <animate attributeName="stroke-dasharray" values="0,10; 10,0" dur="0.2s"
                                    repeatCount="indefinite" />
                            </path>
                        </g>

                        <!-- 3. Parallel Cores (Compute) -->
                        <g transform="translate(260, 120)">
                            <text x="45" y="-10" text-anchor="middle" fill="#33ff33" font-size="10"
                                font-weight="bold">PARALLEL CORES (并行核心)</text>
                            <!-- Parallel Core Grid -->
                            <use href="#core-icon" x="0" y="10" width="20" height="20" />
                            <use href="#core-icon" x="25" y="10" width="20" height="20" />
                            <use href="#core-icon" x="50" y="10" width="20" height="20" />
                            <use href="#core-icon" x="75" y="10" width="20" height="20" />

                            <use href="#core-icon" x="0" y="35" width="20" height="20" />
                            <use href="#core-icon" x="25" y="35" width="20" height="20" />
                            <use href="#core-icon" x="50" y="35" width="20" height="20" />
                            <use href="#core-icon" x="75" y="35" width="20" height="20" />

                            <use href="#core-icon" x="0" y="60" width="20" height="20" />
                            <use href="#core-icon" x="25" y="60" width="20" height="20" />
                            <use href="#core-icon" x="50" y="60" width="20" height="20" />
                            <use href="#core-icon" x="75" y="60" width="20" height="20" />

                            <!-- Calculation Flash -->
                            <rect x="-5" y="5" width="100" height="80" fill="#fff" opacity="0">
                                <animate attributeName="opacity" values="0;0;0.5;0;0.5;0"
                                    keyTimes="0; 0.3; 0.35; 0.4; 0.45; 1" dur="3s" repeatCount="indefinite" />
                            </rect>
                        </g>

                        <!-- 4. Result Matrix (Write Back) -->
                        <g transform="translate(400, 120)" color="#d000ff">
                            <text x="20" y="-10" text-anchor="middle" fill="#d000ff" font-size="10">RESULT C
                                (结果C)</text>
                            <rect x="0" y="0" width="40" height="120" fill="none" stroke="#444" />
                            <!-- Result Tile Appearing -->
                            <g>
                                <use href="#data-tile" x="0" y="0" width="40" height="40" />
                                <animate attributeName="opacity" values="0;0;1;1" keyTimes="0; 0.45; 0.5; 1" dur="3s"
                                    repeatCount="indefinite" />
                                <animate attributeName="fill" values="#111;#111;#d000ff;#111" keyTimes="0; 0.45; 0.5; 1"
                                    dur="3s" repeatCount="indefinite" />
                            </g>
                            <rect x="0" y="40" width="40" height="40" fill="none" stroke="#333" />
                            <rect x="0" y="80" width="40" height="40" fill="none" stroke="#333" />
                        </g>

                        <!-- Connecting Arrows -->
                        <!-- Global to Cache -->
                        <path d="M70 140 L140 140" stroke="#666" stroke-width="1" stroke-dasharray="4,4"
                            marker-end="url(#arrow-head)">
                            <animate attributeName="stroke-dashoffset" values="8;0" dur="1s" repeatCount="indefinite" />
                        </path>
                        <path d="M200 80 L200 120" stroke="#666" stroke-width="1" stroke-dasharray="4,4"
                            marker-end="url(#arrow-head)">
                            <animate attributeName="stroke-dashoffset" values="8;0" dur="1s" repeatCount="indefinite" />
                        </path>

                        <!-- Legend / Status Text -->
                        <text x="250" y="320" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">
                            STATUS (状态):
                            <animate attributeName="fill" values="#666;#ffcc00;#33ff33;#d000ff" keyTimes="0;0.3;0.4;0.5"
                                dur="3s" repeatCount="indefinite" />
                        </text>
                        <text x="250" y="340" text-anchor="middle" fill="#ccc" font-size="12">
                            IDLE (空闲)
                            <animate attributeName="innerHTML"
                                values="LOADING TILES... (从显存加载分块...); CACHED! (已缓存! 高速计算); WRITING... (写入结果块); IDLE (空闲)"
                                keyTimes="0; 0.3; 0.45; 0.8" dur="3s" repeatCount="indefinite" />
                        </text>

                    </svg>
                    <div class="image-caption">FIG_03_D: GPU 分块矩阵计算与缓存机制 (Tiled GEMM & Cache)</div>
                    <div
                        style="margin-top: 15px; font-size: 0.8rem; color: #bbb; text-align: left; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 4px; border-left: 2px solid #ffcc00;">
                        <p><strong>缓存 (Cache) 的核心意义：</strong></p>
                        <ul style="margin: 0; padding-left: 18px; line-height: 1.5;">
                            <li><strong>瓶颈:</strong> 从显存 (Global Memory) 读取数据是很慢的。如果每个核心每次计算都去读显存，GPU 就会卡在"等数据"上。
                            </li>
                            <li><strong>解决方案 (Tiling):</strong> GPU 会把一小块矩阵 A 和 B 先搬运到<strong>片上共享内存 (Shared
                                    Memory)</strong>。
                            </li>
                            <li><strong>极速复用:</strong> 一旦数据进入共享内存（黄色区域），所有核心就能以极高的速度（比显存快几十倍）反复读取这些数据，进行并行计算。</li>
                            <li><strong>结果:</strong> 1 次慢速读取 -> N 次极速计算。这就是 GPU 高效吞吐的秘密。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NPU Section -->
    <section class="reveal">
        <h2>04_NPU: AI 专用引擎 (The Specialist)</h2>
        <div class="content-grid">
            <div>
                <p>NPU (Neural Processing Unit) 是为深度学习而生的专用集成电路 (ASIC)。它不像 CPU 那样全能，也不像 GPU
                    那样暴力堆核，而是专精于<strong>矩阵乘法</strong>。</p>

                <h3>> 核心长处 (Core Strengths)</h3>
                <ul>
                    <li><strong>脉动阵列 (Systolic Array):</strong> 数据像血液一样在芯片内部流动，一次读取，多次计算。极大减少了内存读写（AI 计算中最耗电的部分）。
                    </li>
                    <li><strong>低功耗 (High Efficiency):</strong> 相比 GPU，做同样的 AI 推理任务，功耗可能只有 1/10 甚至更低。</li>
                    <li><strong>INT8 量化:</strong> 擅长处理低精度（8位整数）计算，这对 AI 推理来说精度足够，但速度极快。</li>
                </ul>

                <h3>> 实际案例：手机端实时物体识别</h3>
                <div class="highlight-box"
                    style="border-left: 3px solid var(--accent-green); background: rgba(51, 255, 51, 0.05); padding: 10px; font-size: 0.9rem;">
                    <p style="margin:0;"><strong>场景：</strong> 打开手机相机，取景框实时框出"猫"、"人"、"花"。</p>
                    <hr style="border: 0; border-top: 1px solid #333; margin: 10px 0;">
                    <p style="margin-bottom: 5px;"><strong>为什么需要 NPU？</strong></p>
                    <ul style="margin-top: 0; padding-left: 20px; color: #ccc;">
                        <li><strong>计算量巨大：</strong> 1080p 视频每秒 30 帧，每一帧都要经过神经网络（如 YOLO）的数亿次乘加运算。</li>
                        <li><strong>CPU 做不到：</strong> 串行处理太慢，会导致画面卡顿（掉帧），且手机瞬间发烫。</li>
                        <li><strong>NPU 完美解决：</strong> 利用脉动阵列并行计算，在几毫秒内完成一帧的推理，功耗却极低，保证流畅且省电。</li>
                    </ul>
                </div>

                <h3 style="margin-top: 15px; font-size: 1.1rem;">> 市面主流 NPU 产品</h3>
                <ul style="font-size: 0.8rem; margin-top: 5px; line-height: 1.4;">
                    <li><strong>Apple Neural Engine (ANE):</strong> iPhone/Mac 标配，加速 FaceID 与图像处理。</li>
                    <li><strong>Google Tensor (TPU):</strong> Pixel 手机核心，专攻语音识别与计算摄影。</li>
                    <li><strong>Huawei Ascend (昇腾):</strong> 麒麟芯片 NPU，基于达芬奇架构，算力强劲。</li>
                    <li><strong>Qualcomm Hexagon:</strong> 骁龙 AI 引擎，广泛用于安卓旗舰，能效比高。</li>
                    <li><strong>Intel NPU:</strong> Core Ultra 标配，开启 AI PC 时代，本地运行大模型。</li>
                </ul>
            </div>
            <div class="image-container">
                <svg width="100%" height="280" viewBox="0 0 400 280" style="background: #151515;">
                    <defs>
                        <filter id="glow-3d">
                            <feGaussianBlur stdDeviation="1.5" result="coloredBlur" />
                            <feMerge>
                                <feMergeNode in="coloredBlur" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#33ff33" />
                        </marker>
                    </defs>

                    <!-- 1. Input Stack (Left) - 3D Layers -->
                    <g transform="translate(70, 80)">
                        <text x="0" y="-50" text-anchor="middle" fill="#ccc" font-size="10">RGB TENSORS
                            (RGB张量)</text>
                        <!-- R Layer -->
                        <path d="M -30 0 L 10 -15 L 50 0 L 10 15 Z" fill="rgba(255,0,0,0.2)" stroke="#ff3333"
                            stroke-width="1">
                            <animateTransform attributeName="transform" type="translate" values="0,0; 0,5; 0,0" dur="3s"
                                repeatCount="indefinite" />
                        </path>
                        <!-- G Layer -->
                        <path d="M -30 -15 L 10 -30 L 50 -15 L 10 0 Z" fill="rgba(0,255,0,0.2)" stroke="#33ff33"
                            stroke-width="1">
                            <animateTransform attributeName="transform" type="translate" values="0,0; 0,-5; 0,0"
                                dur="3s" repeatCount="indefinite" />
                        </path>
                        <!-- B Layer -->
                        <path d="M -30 -30 L 10 -45 L 50 -30 L 10 -15 Z" fill="rgba(0,0,255,0.2)" stroke="#3333ff"
                            stroke-width="1">
                            <animateTransform attributeName="transform" type="translate" values="0,0; 0,-10; 0,0"
                                dur="3s" repeatCount="indefinite" />
                        </path>
                    </g>

                    <!-- Arrow to NPU -->
                    <path d="M 120 80 L 160 100" stroke="#33ff33" stroke-width="2" marker-end="url(#arrowhead)"
                        opacity="0.5" />

                    <!-- 2. NPU Chip (Center) - Isometric 3D -->
                    <g transform="translate(200, 120)">
                        <text x="0" y="-70" text-anchor="middle" fill="#33ff33" font-size="12" font-weight="bold">3D
                            SYSTOLIC ARRAY (3D脉动阵列)</text>

                        <!-- Chip Body -->
                        <path d="M -70 0 L 0 35 L 70 0 L 0 -35 Z" fill="#111" stroke="#33ff33" stroke-width="2" />
                        <path d="M -70 0 L 0 35 L 0 55 L -70 20 Z" fill="#0a0a0a" stroke="#33ff33" stroke-width="1"
                            opacity="0.8" />
                        <path d="M 70 0 L 0 35 L 0 55 L 70 20 Z" fill="#000" stroke="#33ff33" stroke-width="1"
                            opacity="0.8" />

                        <!-- 4x4 Grid on Top Surface -->
                        <g id="iso-cells">
                            <!-- Row 1 -->
                            <path d="M 0 -24 L 16 -16 L 0 -8 L -16 -16 Z" fill="#222" stroke="#33ff33"
                                stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 16 -16 L 32 -8 L 16 0 L 0 -8 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.1s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 32 -8 L 48 0 L 32 8 L 16 0 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.2s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 48 0 L 64 8 L 48 16 L 32 8 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.3s"
                                    repeatCount="indefinite" />
                            </path>

                            <!-- Row 2 -->
                            <path d="M -16 -16 L 0 -8 L -16 0 L -32 -8 Z" fill="#222" stroke="#33ff33"
                                stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.1s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 0 -8 L 16 0 L 0 8 L -16 0 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.2s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 16 0 L 32 8 L 16 16 L 0 8 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.3s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 32 8 L 48 16 L 32 24 L 16 16 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.4s"
                                    repeatCount="indefinite" />
                            </path>

                            <!-- Row 3 -->
                            <path d="M -32 -8 L -16 0 L -32 8 L -48 0 Z" fill="#222" stroke="#33ff33"
                                stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.2s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M -16 0 L 0 8 L -16 16 L -32 8 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.3s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 0 8 L 16 16 L 0 24 L -16 16 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.4s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 16 16 L 32 24 L 16 32 L 0 24 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.5s"
                                    repeatCount="indefinite" />
                            </path>

                            <!-- Row 4 -->
                            <path d="M -48 0 L -32 8 L -48 16 L -64 8 Z" fill="#222" stroke="#33ff33"
                                stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.3s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M -32 8 L -16 16 L -32 24 L -48 16 Z" fill="#222" stroke="#33ff33"
                                stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.4s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M -16 16 L 0 24 L -16 32 L -32 24 Z" fill="#222" stroke="#33ff33"
                                stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.5s"
                                    repeatCount="indefinite" />
                            </path>
                            <path d="M 0 24 L 16 32 L 0 40 L -16 32 Z" fill="#222" stroke="#33ff33" stroke-width="0.5">
                                <animate attributeName="fill" values="#222;#3f3;#222" dur="1s" begin="0.6s"
                                    repeatCount="indefinite" />
                            </path>
                        </g>
                    </g>

                    <!-- 3. Output (Right) - 3D Bounding Box -->
                    <g transform="translate(330, 90)">
                        <text x="0" y="-40" text-anchor="middle" fill="#ccc" font-size="10">3D RESULT (3D结果)</text>
                        <!-- Back Face -->
                        <path d="M -20 -20 L 20 -20 L 20 20 L -20 20 Z" fill="none" stroke="#444" stroke-dasharray="2,2"
                            transform="translate(10, -10)" />
                        <!-- Front Face -->
                        <path d="M -20 -20 L 20 -20 L 20 20 L -20 20 Z" fill="none" stroke="#33ff33" stroke-width="2"
                            transform="translate(-10, 10)" />
                        <!-- Connecting Lines -->
                        <path d="M -30 -10 L -10 -30" stroke="#444" stroke-dasharray="2,2" />
                        <path d="M 10 -10 L 30 -30" stroke="#444" stroke-dasharray="2,2" />
                        <path d="M -30 30 L -10 10" stroke="#444" stroke-dasharray="2,2" />
                        <path d="M 10 30 L 30 10" stroke="#444" stroke-dasharray="2,2" />

                        <text x="0" y="50" text-anchor="middle" fill="#33ff33" font-weight="bold">CAT (猫)</text>
                    </g>

                    <!-- Legend -->
                    <text x="200" y="260" text-anchor="middle" fill="#bbb" font-size="10">DATA FLOW: 3D TENSORS ->
                        SYSTOLIC ARRAY -> INFERENCE (数据流: 3D张量 -> 脉动阵列 -> 推理)</text>
                </svg>
                <div class="image-caption">FIG_04: NPU 实时物体识别流程 (Systolic Dataflow)</div>
                <div
                    style="margin-top: 10px; font-size: 0.8rem; color: #eee; text-align: left; background: #222; padding: 10px; border-radius: 5px;">
                    <p style="margin-bottom: 5px; color: #fff;"><strong>图解说明：</strong></p>
                    <ol style="margin-left: 15px; padding-left: 0; margin-top: 0;">
                        <li style="margin-bottom: 3px;"><strong>左侧 (Input):</strong> 摄像头采集图像数据（如猫的像素点），按行扫描输入。</li>
                        <li style="margin-bottom: 3px;"><strong>中间 (NPU Core):</strong> 脉动阵列（Systolic
                            Array）作为核心，数据像波浪一样流过计算单元（PE），高效完成卷积运算。</li>
                        <li><strong>右侧 (Output):</strong> 神经网络输出概率最高的分类结果（CAT 99%）及位置坐标。</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- Comparison Matrix -->
    <section class="reveal">
        <h2>05_参数对比矩阵 (Data Matrix)</h2>
        <table class="tech-table">
            <thead>
                <tr>
                    <th>特性 (Feature)</th>
                    <th class="arch-trigger" data-target="modal-cpu" style="color: var(--accent-cyan);">CPU</th>
                    <th class="arch-trigger" data-target="modal-gpu" style="color: var(--accent-red);">GPU</th>
                    <th class="arch-trigger" data-target="modal-npu" style="color: var(--accent-green);">NPU</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>核心数量</strong></td>
                    <td>少 (4-128)</td>
                    <td>极多 (数千)</td>
                    <td>数百/专用阵列</td>
                </tr>
                <tr>
                    <td><strong>擅长任务</strong></td>
                    <td>逻辑控制、串行计算</td>
                    <td>并行计算、图形渲染</td>
                    <td>矩阵乘法、卷积运算</td>
                </tr>
                <tr>
                    <td><strong>灵活性</strong></td>
                    <td>极高 (什么都能干)</td>
                    <td>高 (可编程)</td>
                    <td>低 (专为 AI 优化)</td>
                </tr>
                <tr>
                    <td><strong>AI 效率</strong></td>
                    <td>低</td>
                    <td>高 (训练首选)</td>
                    <td>极高 (推理首选)</td>
                </tr>
                <tr>
                    <td><strong>典型应用</strong></td>
                    <td>运行 OS、打开 App</td>
                    <td>玩游戏、训练 ChatGPT</td>
                    <td>手机面部识别、拍照优化</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- PART II Cover -->
    <section class="reveal"
        style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
        <h2 style="font-size: 3rem; border: none; text-shadow: 0 0 15px var(--accent-green);">PART II: 全栈AI计算平台与智能终端
        </h2>
        <p style="font-size: 1.5rem; color: #eee; margin-top: 1rem;">Full-Stack AI Platform & Intelligent Terminals
        </p>
        <div style="margin-top: 3rem; position: relative;">
            <svg width="120" height="120" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" stroke="var(--accent-green)" stroke-width="2" fill="none"
                    stroke-dasharray="5,5">
                    <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="10s"
                        repeatCount="indefinite" />
                </circle>
                <circle cx="50" cy="50" r="25" stroke="var(--accent-green)" stroke-width="1" fill="none" />
                <circle cx="50" cy="50" r="5" fill="var(--accent-green)">
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite" />
                </circle>
            </svg>
        </div>
    </section>

    <!-- AI BOOK Section -->
    <section class="reveal">
        <h2>06_全栈AI平台: AI BOOK (AI Computing Terminal)</h2>
        <div class="content-grid">
            <div>
                <h3 style="color: var(--accent-amber); margin-top: 0;">> AIBOOK 算力本 (个人 AI 终端)</h3>
                <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                    <li style="margin-bottom: 15px;">
                        <strong style="color: var(--accent-cyan);">[核心配置]</strong><br>
                        搭载 AB100 异构 SoC 芯片 | 32GB LPDDR5 统一内存 (102.4GB/s) | 1TB SSD<br>
                        14" OLED 2.8K 高刷屏 (120Hz, 100% DCI-P3) | 70Wh 电池 + 100W 快充<br>
                        轻 1.35kg | 薄 12.4mm | 无孔一体机身
                    </li>
                    <li style="margin-bottom: 15px;">
                        <strong style="color: var(--accent-red);">[AI 能力]</strong><br>
                        50TOPS INT8 异构算力 | 支持 FP16/FP32 混合精度<br>
                        兼容 CUDA/MUSA 生态 | 预装 Linux 定制化 MT AIOS<br>
                        内置 Docker, PyTorch, VLLM 等开发工具
                    </li>
                    <li style="margin-bottom: 15px;">
                        <strong style="color: var(--accent-green);">[核心功能]</strong><br>
                        端云大模型 (DeepSeek/MUSAChat) 任选 | 文生图, 绘本创作<br>
                        语音合成/转写 | 个人知识库 | GPU 实时渲染 3D 数字人<br>
                        <span style="color: #888;">(2025年6月 OTA 全双工语音对话)</span>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <strong style="color: #fff;">[开发支持]</strong><br>
                        摩尔学院提供 AI 课程与专家指导 | 配套 AI 助教与实战训练
                    </li>
                </ul>
            </div>
            <div class="image-container">
                <svg width="100%" height="280" viewBox="0 0 400 280" style="background: #151515;">
                    <!-- Laptop Base -->
                    <path d="M 50 200 L 350 200 L 340 220 L 60 220 Z" fill="#222" stroke="#444" stroke-width="2" />
                    <rect x="160" y="222" width="80" height="4" fill="#111" rx="2" />

                    <!-- Laptop Screen -->
                    <path d="M 60 50 L 340 50 L 340 195 L 60 195 Z" fill="#111" stroke="#var(--accent-cyan)"
                        stroke-width="2" />

                    <!-- Screen Content -->
                    <rect x="70" y="60" width="260" height="125" fill="#001100" />

                    <!-- AI Brain Icon on Screen -->
                    <circle cx="200" cy="100" r="20" fill="none" stroke="var(--accent-green)" stroke-width="2"
                        stroke-dasharray="4,2">
                        <animate attributeName="stroke-dashoffset" from="0" to="100" dur="5s"
                            repeatCount="indefinite" />
                    </circle>
                    <path d="M 190 100 L 210 100 M 200 90 L 200 110" stroke="var(--accent-green)" stroke-width="2" />

                    <!-- Text on Screen -->
                    <text x="200" y="140" text-anchor="middle" fill="var(--accent-green)" font-size="10"
                        font-family="monospace">MT AIOS SYSTEM READY</text>
                    <text x="200" y="155" text-anchor="middle" fill="var(--accent-cyan)" font-size="8"
                        font-family="monospace">DeepSeek Model Loaded...</text>

                    <!-- Floating Specs -->
                    <g>
                        <line x1="340" y1="80" x2="380" y2="60" stroke="var(--accent-amber)" stroke-width="1" />
                        <text x="380" y="55" text-anchor="end" fill="var(--accent-amber)" font-size="8">AB100
                            SoC</text>

                        <line x1="60" y1="120" x2="20" y2="100" stroke="var(--accent-red)" stroke-width="1" />
                        <text x="20" y="95" text-anchor="start" fill="var(--accent-red)" font-size="8">50
                            TOPS</text>

                        <line x1="340" y1="160" x2="380" y2="180" stroke="var(--accent-cyan)" stroke-width="1" />
                        <text x="380" y="190" text-anchor="end" fill="var(--accent-cyan)" font-size="8">32GB Unified
                            Mem</text>
                    </g>
                </svg>
                <div class="image-caption">FIG_06: AIBOOK 终端架构示意图</div>
            </div>
        </div>
    </section>

    <!-- Modals -->
    <div id="modal-cpu" class="modal-backdrop">
        <div class="modal-card" style="border-color: var(--accent-cyan);">
            <span class="close-btn">&times;</span>
            <h3 style="color: var(--accent-cyan); margin-top: 0;">CPU ARCHITECTURE</h3>
            <p style="font-size: 0.9rem; color: #ccc;">Von Neumann Architecture: Optimized for sequential processing
                and complex logic control.</p>
            <svg viewBox="0 0 200 120" style="background:#111; width:100%; border: 1px solid #333;">
                <rect x="50" y="20" width="100" height="25" fill="none" stroke="var(--accent-cyan)" stroke-width="2" />
                <text x="100" y="37" text-anchor="middle" fill="var(--accent-cyan)" font-size="10">CONTROL
                    UNIT (控制单元)</text>
                <rect x="50" y="55" width="100" height="25" fill="none" stroke="var(--accent-cyan)" stroke-width="2" />
                <text x="100" y="72" text-anchor="middle" fill="var(--accent-cyan)" font-size="10">ALU (Core)
                    (逻辑核心)</text>
                <rect x="50" y="90" width="100" height="20" fill="none" stroke="#666" stroke-width="2" />
                <text x="100" y="104" text-anchor="middle" fill="#666" font-size="10">CACHE / MEMORY (缓存/内存)</text>
                <line x1="100" y1="45" x2="100" y2="55" stroke="#444" stroke-width="2" />
                <line x1="100" y1="80" x2="100" y2="90" stroke="#444" stroke-width="2" />
            </svg>
        </div>
    </div>

    <div id="modal-gpu" class="modal-backdrop">
        <div class="modal-card" style="border-color: var(--accent-red);">
            <span class="close-btn">&times;</span>
            <h3 style="color: var(--accent-red); margin-top: 0;">GPU ARCHITECTURE</h3>
            <p style="font-size: 0.9rem; color: #ccc;">SIMD Architecture: Thousands of small cores designed for
                parallel tasks.</p>
            <svg viewBox="0 0 200 120" style="background:#111; width:100%; border: 1px solid #333;">
                <g fill="none" stroke="var(--accent-red)" stroke-width="1">
                    <!-- 4x3 Grid of Cores -->
                    <rect x="40" y="20" width="20" height="20" />
                    <rect x="70" y="20" width="20" height="20" />
                    <rect x="100" y="20" width="20" height="20" />
                    <rect x="130" y="20" width="20" height="20" />
                    <rect x="40" y="50" width="20" height="20" />
                    <rect x="70" y="50" width="20" height="20" />
                    <rect x="100" y="50" width="20" height="20" />
                    <rect x="130" y="50" width="20" height="20" />
                    <rect x="40" y="80" width="20" height="20" />
                    <rect x="70" y="80" width="20" height="20" />
                    <rect x="100" y="80" width="20" height="20" />
                    <rect x="130" y="80" width="20" height="20" />
                </g>
                <text x="100" y="115" text-anchor="middle" fill="var(--accent-red)" font-size="10">THOUSANDS OF
                    CORES (数千核心)</text>
            </svg>
        </div>
    </div>

    <div id="modal-npu" class="modal-backdrop">
        <div class="modal-card" style="border-color: var(--accent-green);">
            <span class="close-btn">&times;</span>
            <h3 style="color: var(--accent-green); margin-top: 0;">NPU ARCHITECTURE</h3>
            <p style="font-size: 0.9rem; color: #ccc;">Systolic Array: Data flows through a grid of processing units
                like a pulse.</p>
            <svg viewBox="0 0 200 120" style="background:#111; width:100%; border: 1px solid #333;">
                <g fill="var(--accent-green)" opacity="0.5">
                    <circle cx="50" cy="30" r="4" />
                    <circle cx="80" cy="30" r="4" />
                    <circle cx="110" cy="30" r="4" />
                    <circle cx="140" cy="30" r="4" />
                    <circle cx="50" cy="60" r="4" />
                    <circle cx="80" cy="60" r="4" />
                    <circle cx="110" cy="60" r="4" />
                    <circle cx="140" cy="60" r="4" />
                    <circle cx="50" cy="90" r="4" />
                    <circle cx="80" cy="90" r="4" />
                    <circle cx="110" cy="90" r="4" />
                    <circle cx="140" cy="90" r="4" />
                </g>
                <!-- Connections -->
                <path d="M 50 30 L 140 30 M 50 60 L 140 60 M 50 90 L 140 90" stroke="var(--accent-green)"
                    stroke-width="1" />
                <path d="M 50 30 L 50 90 M 80 30 L 80 90 M 110 30 L 110 90 M 140 30 L 140 90"
                    stroke="var(--accent-green)" stroke-width="1" />
                <text x="100" y="115" text-anchor="middle" fill="var(--accent-green)" font-size="10">SYSTOLIC
                    ARRAY (脉动阵列)</text>
            </svg>
        </div>
    </div>

    </div>

    <footer>
        <p>GENERATED_BY_AI_ASSISTANT // TERMINAL_SESSION_END</p>
        <p>2025 © CORP_DATA_SYSTEMS</p>
    </footer>

    <script>
        // Inject Retro Grid into each section
        document.querySelectorAll('section').forEach(section => {
            const grid = document.createElement('div');
            grid.classList.add('retro-grid');
            section.insertBefore(grid, section.firstChild);
        });

        // PPT Navigation Logic
        const slides = document.querySelectorAll(".reveal");
        let currentSlide = 0;

        // Generate Navigation Menu
        const navList = document.getElementById('nav-list');
        if (navList) {
            slides.forEach((slide, index) => {
                // Try to find a title
                let title = "SLIDE_" + index;
                const h1 = slide.querySelector('h1');
                const h2 = slide.querySelector('h2');

                if (h1) title = "芯力量首页";
                else if (h2) title = h2.innerText.split('(')[0].trim(); // Take main part

                // Truncate if too long
                if (title.length > 28) title = title.substring(0, 28) + "...";

                const li = document.createElement('li');
                li.classList.add('nav-item');

                const a = document.createElement('a');
                a.classList.add('nav-link');
                a.innerText = title;
                a.onclick = (e) => {
                    e.stopPropagation(); // Prevent document click
                    currentSlide = index;
                    showSlide(currentSlide);
                };

                li.appendChild(a);
                navList.appendChild(li);
            });
        }

        function showSlide(index) {
            slides.forEach((slide, i) => {
                if (i === index) {
                    slide.classList.add("active");
                    // Reset animations if needed
                    const svg = slide.querySelector('svg');
                    if (svg && svg.setCurrentTime) svg.setCurrentTime(0);
                } else {
                    slide.classList.remove("active");
                }
            });
        }

        // Initialize first slide
        showSlide(currentSlide);

        // Mouse Navigation
        document.addEventListener('mousedown', (e) => {
            // Ignore clicks on interactive elements like buttons or links or modals or the interactive chip or detail overlay or music toggle
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('.modal-card') || e.target.closest('.close-btn') || e.target.closest('.chip-stack') || e.target.closest('#detail-overlay') || e.target.closest('.music-toggle') || e.target.closest('#model-3d-container')) return;

            // Ignore clicks on scrollbar
            // If the target is the section (which has the scrollbar), check if click is outside client area
            if (e.target.tagName === 'SECTION') {
                if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {
                    return;
                }
            }

            if (e.button === 0) { // Left Click -> Next
                if (currentSlide < slides.length - 1) {
                    currentSlide++;
                    showSlide(currentSlide);
                }
            } else if (e.button === 2) { // Right Click -> Prev
                if (currentSlide > 0) {
                    currentSlide--;
                    showSlide(currentSlide);
                }
            }
        });

        // Prevent Context Menu on Right Click
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                if (currentSlide < slides.length - 1) {
                    currentSlide++;
                    showSlide(currentSlide);
                }
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                if (currentSlide > 0) {
                    currentSlide--;
                    showSlide(currentSlide);
                }
            }
        });

        // Typing effect
        const headerText = "CORE_POWER_INTELLIGENT_UNIVERSE_INIT";
        const headerP = document.querySelector('.protocol-text');

        if (headerP) {
            function runTyping(onComplete) {
                headerP.innerText = "";
                let i = 0;
                function type() {
                    if (i < headerText.length) {
                        headerP.innerHTML += headerText.charAt(i);
                        i++;
                        setTimeout(type, 50);
                    } else {
                        if (onComplete) onComplete();
                    }
                }
                type();
            }

            // Initial run
            setTimeout(() => {
                runTyping(() => {
                    // Start loop after 5s from page load (approx 2.2s after finish)
                    setTimeout(loopTyping, 2200);
                });
            }, 1000);

            function loopTyping() {
                runTyping(() => {
                    // Wait 2s before retyping
                    setTimeout(loopTyping, 2000);
                });
            }
        }

        // --- Advanced Interaction Scripts ---

        // 1. Optimized Custom Cursor Logic
        const cursor = document.createElement('div');
        cursor.classList.add('custom-cursor');

        const cursorScan = document.createElement('div');
        cursorScan.classList.add('cursor-scan');
        cursor.appendChild(cursorScan);

        const cursorInner = document.createElement('div');
        cursorInner.classList.add('cursor-inner');
        cursor.appendChild(cursorInner);

        document.body.appendChild(cursor);

        let cursorX = 0;
        let cursorY = 0;
        let cursorRafId = null;
        let cursorTimeout = null;

        // Use requestAnimationFrame for smooth visual updates
        document.addEventListener('mousemove', (e) => {
            cursorX = e.clientX;
            cursorY = e.clientY;

            // Show cursor
            cursor.style.opacity = '1';

            // Reset timeout
            if (cursorTimeout) clearTimeout(cursorTimeout);
            cursorTimeout = setTimeout(() => {
                cursor.style.opacity = '0';
            }, 3000);

            if (!cursorRafId) {
                cursorRafId = requestAnimationFrame(() => {
                    // Use translate3d for GPU acceleration
                    // Only translate the container. The inner element handles centering (-50%, -50%)
                    cursor.style.transform = `translate3d(${cursorX}px, ${cursorY}px, 0)`;
                    cursorRafId = null;
                });
            }
        });

        // Add hover effect to interactive elements
        document.querySelectorAll('a, button, .reveal, h2, h3, tr, p, li, span').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });

        // 2. Optimized 3D Tilt Effect for Cards
        document.querySelectorAll('.reveal, .modal-card').forEach(card => {
            card.style.transformStyle = 'preserve-3d';
            card.style.perspective = '1000px';
            // Hint browser to promote layer
            card.style.willChange = 'transform';

            let cardRafId = null;
            let bounds = null;

            // Cache bounds on mouse enter to avoid layout thrashing during move
            card.addEventListener('mouseenter', () => {
                bounds = card.getBoundingClientRect();
            });

            card.addEventListener('mousemove', (e) => {
                if (cardRafId) return;

                cardRafId = requestAnimationFrame(() => {
                    // Fallback if bounds missing
                    if (!bounds) bounds = card.getBoundingClientRect();

                    const x = e.clientX - bounds.left;
                    const y = e.clientY - bounds.top;

                    const centerX = bounds.width / 2;
                    const centerY = bounds.height / 2;

                    // Calculate rotation (max 0.5 degrees to be subtle)
                    const rotateX = ((y - centerY) / centerY) * -0.5;
                    const rotateY = ((x - centerX) / centerX) * 0.5;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.01)`;

                    cardRafId = null;
                });
            });

            card.addEventListener('mouseleave', () => {
                if (cardRafId) {
                    cancelAnimationFrame(cardRafId);
                    cardRafId = null;
                }
                // Clear inline transform to let CSS take over
                card.style.transform = '';
                bounds = null; // Clear cache
            });
        });

        // 3. Text Scramble Effect
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}—=+*^?#________';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 60);
                    const end = start + Math.floor(Math.random() * 60);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.02) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += `<span class="dud">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        // Apply Scramble to H2 titles
        document.querySelectorAll('h2').forEach(el => {
            const fx = new TextScramble(el);
            let originalText = el.innerText;

            // Scramble on hover
            el.addEventListener('mouseenter', () => {
                fx.setText(originalText);
            });
        });

        // 5. Architecture Modals Logic
        const triggers = document.querySelectorAll('.arch-trigger');
        const closeButtons = document.querySelectorAll('.close-btn');
        const modals = document.querySelectorAll('.modal-backdrop');

        triggers.forEach(trigger => {
            trigger.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent bubbling
                const targetId = trigger.getAttribute('data-target');
                const modal = document.getElementById(targetId);
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling
                }
            });
        });

        closeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const modal = btn.closest('.modal-backdrop');
                modal.classList.remove('active');
                document.body.style.overflow = '';
            });
        });

        // Close on click outside
        modals.forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                modals.forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = '';
            }
        });

        // 6. Matrix Rain on Sides
        const matrixCanvas = document.createElement('canvas');
        matrixCanvas.id = 'matrix-canvas';
        document.body.appendChild(matrixCanvas);
        const ctx = matrixCanvas.getContext('2d');

        let width = matrixCanvas.width = window.innerWidth;
        let height = matrixCanvas.height = window.innerHeight;
        // Column width 20px
        let cols = Math.floor(width / 20);
        let drops = [];
        let columnState = []; // Track phrase state for each column

        function initDrops() {
            cols = Math.floor(width / 20);
            drops = [];
            columnState = [];
            for (let i = 0; i < cols; i++) {
                // Only active on sides (10% width)
                if (i < cols * 0.1 || i > cols * 0.9) {
                    drops[i] = Math.random() * -100;
                } else {
                    drops[i] = null;
                }
                columnState[i] = null;
            }
        }
        initDrops();

        const chars = "0123456789ABCDEF";
        const phrases = ["西山居SSG中台牛逼", "指导牛逼"];

        let lastDrawTime = 0;
        const frameInterval = 50; // Slow down speed (approx 20fps)

        function drawMatrix(timestamp) {
            if (!timestamp) timestamp = 0;
            if (timestamp - lastDrawTime < frameInterval) {
                requestAnimationFrame(drawMatrix);
                return;
            }
            lastDrawTime = timestamp;

            // Fade effect - slightly darker for better contrast
            ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
            ctx.fillRect(0, 0, width, height);

            // Base font setting
            ctx.font = '16px "VT323", monospace';

            for (let i = 0; i < drops.length; i++) {
                if (drops[i] === null) continue;

                let text;
                let isSpecial = false;

                // Check if we are in a phrase mode
                if (columnState[i]) {
                    const state = columnState[i];
                    text = state.phrase[state.index];
                    state.index++;
                    if (state.index >= state.phrase.length) {
                        columnState[i] = null; // Phrase finished
                    }
                    isSpecial = true;
                } else {
                    // Random character
                    text = chars[Math.floor(Math.random() * chars.length)];

                    // Small chance to start a phrase
                    if (Math.random() < 0.005) {
                        const p = phrases[Math.floor(Math.random() * phrases.length)];
                        columnState[i] = { phrase: p, index: 0 };
                        text = p[0];
                        columnState[i].index = 1;
                        isSpecial = true;
                    }
                }

                if (isSpecial) {
                    // Highlight style for special phrases
                    ctx.fillStyle = '#FFFFFF'; // Bright white
                    ctx.shadowBlur = 8;
                    ctx.shadowColor = '#00FF00'; // Green glow
                    ctx.font = 'bold 20px "VT323", monospace'; // Larger and bold
                } else {
                    // Retro tech style for normal characters
                    // Varying green opacity for "glitch" feel
                    const opacity = Math.random() > 0.9 ? 1 : 0.7;
                    ctx.fillStyle = `rgba(0, 255, 0, ${opacity})`;
                    ctx.shadowBlur = 0;
                    ctx.font = '16px "VT323", monospace';
                }

                ctx.fillText(text, i * 20, drops[i] * 20);

                // Reset shadow
                ctx.shadowBlur = 0;

                if (drops[i] * 20 > height && Math.random() > 0.975) {
                    drops[i] = 0;
                    columnState[i] = null; // Reset state on loop
                }
                drops[i]++;
            }
            requestAnimationFrame(drawMatrix);
        }

        window.addEventListener('resize', () => {
            width = matrixCanvas.width = window.innerWidth;
            height = matrixCanvas.height = window.innerHeight;
            initDrops();
        });

        requestAnimationFrame(drawMatrix);

        // 7. Interactive Chip Rotation (DISABLED FOR FLAT VIEW)
        /*
        const chipStack = document.getElementById('interactive-chip');
        if (chipStack) {
            let isDragging = false;
            let startX, startY;
            let currentRotX = 60;
            let currentRotZ = 45;
 
            let isClick = true; // Flag to distinguish click from drag
            let isInteractiveTarget = false;
 
            chipStack.addEventListener('mousedown', (e) => {
                // Check if clicking on an interactive block
                if (e.target.closest('.arch-block')) {
                    isInteractiveTarget = true;
                } else {
                    isInteractiveTarget = false;
                }
 
                isDragging = true;
                isClick = true; // Assume click initially
                startX = e.clientX;
                startY = e.clientY;
                chipStack.style.cursor = 'grabbing';
                // Prevent default drag behavior
                e.preventDefault();
            });
 
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
 
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
 
                // If moved significantly, it's a drag, not a click
                if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {
                    isClick = false;
                }
 
                // Adjust sensitivity
                currentRotZ += deltaX * 0.5;
                currentRotX -= deltaY * 0.5;
 
                // Only update transform if NOT zoomed (or handle zoom rotation differently)
                if (!chipStack.classList.contains('zoomed')) {
                    chipStack.style.transform = `rotateX(${currentRotX}deg) rotateZ(${currentRotZ}deg)`;
                }
 
                startX = e.clientX;
                startY = e.clientY;
            });
 
            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    chipStack.style.cursor = 'grab';
 
                    if (isClick && !isInteractiveTarget) {
                        // Toggle Zoom only if NOT clicking an interactive block
                        chipStack.classList.toggle('zoomed');
                        if (chipStack.classList.contains('zoomed')) {
                            // Reset rotation visually via CSS !important, but maybe we want to reset internal state?
                            // For now, CSS handles the visual reset.
                        } else {
                            // Restore rotation
                            chipStack.style.transform = `rotateX(${currentRotX}deg) rotateZ(${currentRotZ}deg)`;
                        }
                    }
                }
            });
        }
        */
    </script>
    <!-- Detail Overlay -->
    <div id="detail-overlay">
        <div class="detail-content">
            <div class="detail-header">
                <div class="detail-title" id="detail-title">组件详情</div>
                <div class="zoom-controls">
                    <div class="zoom-btn" onclick="adjustZoom(0.1)">+</div>
                    <div class="zoom-btn" onclick="adjustZoom(-0.1)">-</div>
                </div>
                <button class="detail-close-btn" onclick="closeDetail()" title="关闭视图">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="3" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="detail-viewport" id="detail-viewport">
                <div class="detail-scene" id="detail-scene">
                    <!-- CPU Detail View -->
                    <div class="detail-view-cpu" id="view-cpu">
                        <h3
                            style="color:var(--accent-cyan); border-bottom:1px solid var(--accent-cyan); margin-bottom: 15px;">
                            CPU 架构</h3>
                        <div class="cpu-core-container">
                            <div class="cpu-core">
                                <div class="core-title">核心 1 (高性能)</div>
                                <div class="cpu-control">控制单元 / 分支预测</div>
                                <div class="cpu-exec-group">
                                    <div class="cpu-unit alu">ALU (整数)</div>
                                    <div class="cpu-unit fpu">FPU (浮点)</div>
                                </div>
                                <div class="cpu-cache-group">
                                    <div class="cpu-cache l1">L1 Cache</div>
                                    <div class="cpu-cache l2">L2 Cache</div>
                                </div>
                            </div>
                            <div class="cpu-core">
                                <div class="core-title">核心 2 (高性能)</div>
                                <div class="cpu-control" style="animation-delay: 0.5s;">控制单元 / 分支预测</div>
                                <div class="cpu-exec-group">
                                    <div class="cpu-unit alu" style="animation-delay: 0.7s;">ALU (整数)</div>
                                    <div class="cpu-unit fpu" style="animation-delay: 0.9s;">FPU (浮点)</div>
                                </div>
                                <div class="cpu-cache-group">
                                    <div class="cpu-cache l1" style="animation-delay: 1.1s;">L1 Cache</div>
                                    <div class="cpu-cache l2" style="animation-delay: 1.3s;">L2 Cache</div>
                                </div>
                            </div>
                        </div>

                        <!-- Bus Connections -->
                        <div class="cpu-bus-container">
                            <div class="bus-line-group" id="bus-group-1">
                                <div class="bus-line"></div>
                                <div class="bus-packet-down"></div>
                                <div class="bus-packet-up"></div>
                            </div>
                            <div class="bus-line-group" id="bus-group-2">
                                <div class="bus-line"></div>
                                <div class="bus-packet-down"></div>
                                <div class="bus-packet-up"></div>
                            </div>
                        </div>

                        <div class="cpu-l3-cache" id="cpu-l3">
                            <div class="l3-label">共享 L3 缓存 / 互连总线</div>
                            <div class="l3-grid"></div>
                        </div>
                    </div>

                    <!-- GPU Detail View -->
                    <div class="detail-view-gpu" id="view-gpu">
                        <h3
                            style="color:var(--accent-red); border-bottom:1px solid var(--accent-red); margin-bottom: 15px;">
                            GPU 架构</h3>
                        <div class="gpu-grid-container">
                            <!-- Generate many cores with random delays -->
                            <script>
                                for (let i = 0; i < 32; i++) {
                                    const delay = Math.random() * 2;
                                    document.write(`<div class="gpu-core-unit" style="animation: gpu-flicker 2s infinite ${delay}s;"></div>`);
                                }
                            </script>
                        </div>
                        <div
                            style="margin-top:15px; text-align:center; color:var(--accent-red); font-weight:bold; text-shadow: 0 0 5px var(--accent-red);">
                            大规模并行处理单元 (32/32 激活)
                        </div>
                    </div>

                    <!-- NPU Detail View -->
                    <div class="detail-view-npu" id="view-npu">
                        <h3
                            style="color:var(--accent-green); border-bottom:1px solid var(--accent-green); margin-bottom: 15px;">
                            NPU 架构</h3>
                        <div class="npu-container">
                            <div class="npu-buffer">权重缓冲</div>
                            <div class="npu-array">
                                <!-- Systolic Array Visual with Wave Animation -->
                                <script>
                                    for (let i = 0; i < 100; i++) {
                                        // Calculate diagonal delay for wave effect
                                        const row = Math.floor(i / 10);
                                        const col = i % 10;
                                        const delay = (row + col) * 0.1;
                                        document.write(`<div class="npu-node" style="animation: npu-pulse 2s infinite ${delay}s;"></div>`);
                                    }
                                </script>
                            </div>
                            <div class="npu-buffer">激活函数</div>
                        </div>
                        <div
                            style="margin-top:15px; text-align:center; color:var(--accent-green); font-weight:bold; text-shadow: 0 0 5px var(--accent-green);">
                            脉动阵列矩阵乘法器
                        </div>
                    </div>
                </div>
            </div>

            <div class="detail-info-panel">
                <div id="detail-desc">选择一个组件以查看详情。</div>
                <div style="margin-top:5px; font-size:0.8rem; color:#888;">操作：滚动缩放 • 拖拽平移</div>
            </div>
        </div>
    </div>

    <script>
        // --- Detail View Logic ---
        const overlay = document.getElementById('detail-overlay');
        const detailTitle = document.getElementById('detail-title');
        const detailDesc = document.getElementById('detail-desc');
        const detailScene = document.getElementById('detail-scene');
        const viewport = document.getElementById('detail-viewport');

        let currentZoom = 1;
        let currentPanX = 0;
        let currentPanY = 0;
        let isPanning = false;
        let lastMouseX = 0;
        let lastMouseY = 0;

        function openDetail(type) {
            // Stop propagation if called from click event
            if (event) event.stopPropagation();

            overlay.classList.add('active');

            // Hide all views first
            document.querySelectorAll('[id^="view-"]').forEach(el => el.style.display = 'none');

            // Reset Transform
            currentZoom = 1;
            currentPanX = 0;
            currentPanY = 0;
            updateTransform();

            if (type === 'cpu') {
                document.getElementById('view-cpu').style.display = 'block';
                detailTitle.innerText = "CPU: 串行处理";
                detailTitle.style.color = "var(--accent-cyan)";
                detailDesc.innerHTML = "<strong>中央处理器 (CPU)</strong> 专为复杂的串行任务设计。它拥有大容量缓存 (L1/L2/L3) 和强大的 ALU/FPU，能够以极低的延迟处理分支预测和多样化的指令集。";

                // Initialize CPU Interactions
                initCpuInteractions();
            } else if (type === 'gpu') {
                document.getElementById('view-gpu').style.display = 'grid'; // Grid for GPU
                detailTitle.innerText = "GPU: 并行处理";
                detailTitle.style.color = "var(--accent-red)";
                detailDesc.innerHTML = "<strong>图形处理器 (GPU)</strong> 由成千上万个小型核心组成，专为大规模并行计算设计。非常适合渲染和可以分解为同时操作 (SIMD) 的任务。";
            } else if (type === 'npu') {
                document.getElementById('view-npu').style.display = 'block';
                detailTitle.innerText = "NPU: 张量处理";
                detailTitle.style.color = "var(--accent-green)";
                detailDesc.innerHTML = "<strong>神经网络处理器 (NPU)</strong> 是针对矩阵乘法优化的专用架构。它采用脉动阵列设计，使数据在处理单元之间流动，从而最大化 AI 推理的吞吐量。";
            }
        }

        function closeDetail() {
            overlay.classList.remove('active');
        }

        function updateTransform() {
            detailScene.style.transform = `translate(-50%, -50%) translate(${currentPanX}px, ${currentPanY}px) scale(${currentZoom})`;
        }

        function adjustZoom(delta) {
            currentZoom += delta;
            if (currentZoom < 0.5) currentZoom = 0.5;
            if (currentZoom > 5) currentZoom = 5;
            updateTransform();
        }

        // Scroll to Zoom
        viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomSpeed = 0.001;
            currentZoom += e.deltaY * -zoomSpeed;
            if (currentZoom < 0.5) currentZoom = 0.5;
            if (currentZoom > 5) currentZoom = 5;
            updateTransform();
        });

        // Drag to Pan
        viewport.addEventListener('mousedown', (e) => {
            isPanning = true;
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
            viewport.style.cursor = 'grabbing';
        });

        window.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            const deltaX = e.clientX - lastMouseX;
            const deltaY = e.clientY - lastMouseY;

            // Adjust pan based on zoom level to keep feel consistent
            currentPanX += deltaX / currentZoom;
            currentPanY += deltaY / currentZoom;

            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
            updateTransform();
        });

        window.addEventListener('mouseup', () => {
            isPanning = false;
            viewport.style.cursor = 'grab';
        });

        // CPU Interaction Logic
        function initCpuInteractions() {
            const cores = document.querySelectorAll('.cpu-core');
            const l3 = document.getElementById('cpu-l3');
            const busGroups = document.querySelectorAll('.bus-line-group');

            // Core Hover -> Highlight Path to L3
            cores.forEach((core, index) => {
                core.addEventListener('mouseenter', () => {
                    // Highlight this core
                    core.classList.add('active');
                    // Highlight corresponding bus
                    if (busGroups[index]) {
                        busGroups[index].classList.add('active');
                        busGroups[index].classList.add('flow-down'); // Data flows down
                    }
                    // Highlight L3
                    l3.classList.add('active');
                    detailDesc.innerHTML = `<strong>核心 ${index + 1}</strong> 正在访问 <strong>L3 缓存</strong>。数据通过高速互连总线传输。`;
                });

                core.addEventListener('mouseleave', () => {
                    core.classList.remove('active');
                    if (busGroups[index]) {
                        busGroups[index].classList.remove('active');
                        busGroups[index].classList.remove('flow-down');
                    }
                    l3.classList.remove('active');
                    detailDesc.innerHTML = "<strong>中央处理器 (CPU)</strong> 专为复杂的串行任务设计。它拥有大容量缓存 (L1/L2/L3) 和强大的 ALU/FPU，能够以极低的延迟处理分支预测和多样化的指令集。";
                });
            });

            // L3 Hover -> Highlight All Cores
            l3.addEventListener('mouseenter', () => {
                l3.classList.add('active');
                cores.forEach(core => core.classList.add('active'));
                busGroups.forEach(bus => {
                    bus.classList.add('active');
                    bus.classList.add('flow-up'); // Data flows up (broadcast/snoop)
                });
                detailDesc.innerHTML = "<strong>共享 L3 缓存</strong> 协调所有核心之间的数据一致性，并作为通往主内存的高速桥梁。";
            });

            l3.addEventListener('mouseleave', () => {
                l3.classList.remove('active');
                cores.forEach(core => core.classList.remove('active'));
                busGroups.forEach(bus => {
                    bus.classList.remove('active');
                    bus.classList.remove('flow-up');
                });
                detailDesc.innerHTML = "<strong>中央处理器 (CPU)</strong> 专为复杂的串行任务设计。它拥有大容量缓存 (L1/L2/L3) 和强大的 ALU/FPU，能够以极低的延迟处理分支预测和多样化的指令集。";
            });
        }

        // --- Background Music Control ---
        const bgmAudio = document.getElementById('bgm-audio');
        const musicToggle = document.getElementById('music-toggle');
        const musicNext = document.getElementById('music-next');
        const musicIcon = document.getElementById('music-icon');
        const musicText = document.getElementById('music-text');

        // Playlist
        const playlist = [
            "music/Hans Zimmer - Opening Credits_L.ogg",
            "music/Hans Zimmer - Risen from Darkness_L.ogg"
        ];
        let currentTrackIndex = 0;

        // Set initial volume
        bgmAudio.volume = 0.4;

        // Update UI based on actual audio state
        function updateMusicUI() {
            if (!bgmAudio.paused) {
                musicToggle.classList.add('playing');
                musicIcon.innerText = "🔊";
                musicText.innerText = "BGM: ON";
            } else {
                musicToggle.classList.remove('playing');
                musicIcon.innerText = "🔇";
                musicText.innerText = "BGM: OFF";
            }
        }

        // Listen for state changes directly from the audio element
        bgmAudio.addEventListener('play', updateMusicUI);
        bgmAudio.addEventListener('pause', updateMusicUI);

        // Play Next Track
        function playNextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
            const nextTrack = playlist[currentTrackIndex];
            console.log("Switching to:", nextTrack);

            bgmAudio.src = nextTrack;
            bgmAudio.play().catch(e => {
                console.error("Play failed for", nextTrack, e);
            });
        }

        // Error handling
        bgmAudio.addEventListener('error', (e) => {
            console.error("Audio Error:", e);
            musicText.innerText = "BGM: ERR";
            // Auto skip to next song on error (e.g. .mgg format issue)
            console.log("Skipping to next track due to error...");
            setTimeout(() => playNextTrack(), 1000);
        });

        // Auto play next when ended
        bgmAudio.addEventListener('ended', () => {
            playNextTrack();
        });

        function toggleMusic(e) {
            // Prevent this click from triggering the document-level fallback
            if (e) e.stopPropagation();

            if (bgmAudio.paused) {
                const playPromise = bgmAudio.play();
                if (playPromise !== undefined) {
                    playPromise.catch(e => {
                        console.error("Play failed:", e);
                        // Don't alert immediately, just log. User might be spamming click.
                    });
                }
            } else {
                bgmAudio.pause();
            }
        }

        // Bind click event
        musicToggle.addEventListener('click', toggleMusic);

        if (musicNext) {
            musicNext.addEventListener('click', (e) => {
                e.stopPropagation();
                playNextTrack();
            });
        }

        // Robust Autoplay Logic
        window.addEventListener('load', () => {
            // 1. Try to play immediately
            const playPromise = bgmAudio.play();

            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Autoplay prevented. Waiting for interaction.");

                    // 2. Fallback: Play on first interaction
                    const startAudio = () => {
                        bgmAudio.play().then(() => {
                            // Success
                            document.removeEventListener('click', startAudio);
                            document.removeEventListener('keydown', startAudio);
                        }).catch(err => {
                            console.log("Interaction play failed:", err);
                        });
                    };

                    document.addEventListener('click', startAudio);
                    document.addEventListener('keydown', startAudio);
                });
            }
        });

    </script>
</body>

</html>